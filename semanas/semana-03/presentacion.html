<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolos y Formatos en Sistemas Distribuidos</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>◉</text></svg>">
    <link rel="stylesheet" href="css/presentacion.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Mermaid.js para diagramas -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script src="js/mermaid-config.js"></script>

    <!-- Prism.js para Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-protobuf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-xml-doc.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css">
</head>

<body>
    <div class="uide-logo">
        <img src="../../Logo%20UIDE.png" alt="UIDE Logo">
    </div>
    <div class="presentation-container">
        <!-- Slide 1: Title -->
        <div class="slide active title-slide">
            <div style="text-align: center; margin-bottom: 2rem;">
                <h3 style="color: #e2e8f0; font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">
                    Presentación Semana 3
                </h3>
                <h2 style="color: var(--uide-accent); font-size: 2.2rem; font-weight: 600; margin-bottom: 0.5rem;">
                    Protocolos y Formatos en Sistemas Distribuidos
                </h2>
                <p style="color: #ffffff; font-size: 1.4rem; font-weight: 500;">
                    LTI_05A_458 PMSBD • Cuarto Nivel
                </p>
                <p style="color: #e2e8f0; font-size: 1.2rem; margin-top: 0.5rem;">
                    Programación de Middleware y Seguridad en Base de Datos
                </p>
            </div>
            <div style="text-align: center; margin: 2rem 0;">
                <p style="color: #ffffff; font-size: 1.3rem; font-weight: 600;">
                    Prof. Charlie Cárdenas Toledo, M.Sc.
                </p>
                <p style="color: var(--uide-primary); font-size: 1.2rem; font-weight: 500; margin-top: 0.5rem;">
                    Octubre 2025 – Febrero 2026
                </p>
            </div>
            <div
                style="text-align: center; margin-top: 2.5rem; padding: 25px; background: rgba(15, 20, 25, 0.6); border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: var(--uide-accent); font-size: 1.4rem; margin-bottom: 1rem;">
                    <i class="fas fa-network-wired"></i> Unidad 2: Protocolos y Seguridad en Middleware
                </h3>
                <p style="color: #e2e8f0; font-size: 1.1rem; line-height: 1.4; margin: 0.5rem 0;">
                    <strong>Semana 3</strong> • HTTP/2, WebSockets, gRPC • Formatos: JSON, Protobuf, MessagePack • XML
                    básico y rol enterprise
                </p>
                <p style="color: #cbd5e1; font-size: 1rem; margin-top: 1rem; font-style: italic;">
                    Protocolos de comunicación y formatos de intercambio de datos en sistemas distribuidos
                </p>
            </div>
        </div>

        <!-- Slide 2: Actividades y Herramientas -->
        <div class="slide">
            <h2><i class="fas fa-clipboard-list"></i> Actividades Calificadas y Herramientas</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 0 40px;">
                <!-- Columna Izquierda: Actividades Calificadas -->
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div
                        style="padding: 20px; background: rgba(15, 20, 25, 0.6); border-radius: 12px; border: 2px solid var(--uide-primary);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="color: var(--uide-primary); font-size: 1.3rem; margin: 0;">
                                <i class="fas fa-clipboard-check"></i> Actividades Calificadas
                            </h3>
                            <button onclick="copyActivitiesPMSBD()" class="teacher-copy-btn-pmsbd"
                                style="display: none; background: rgba(96, 165, 250, 0.2); border: 1px solid #60a5fa; color: #60a5fa; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;"
                                onmouseover="this.style.background='rgba(96, 165, 250, 0.3)'"
                                onmouseout="this.style.background='rgba(96, 165, 250, 0.2)'">
                                <i class="fas fa-copy"></i> Copiar
                            </button>
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <!-- GA-1.1 -->
                            <div
                                style="background: rgba(96, 165, 250, 0.15); padding: 15px; border-radius: 10px; border-left: 4px solid #60a5fa;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                    <span style="color: #e2e8f0; font-size: 1rem; font-weight: 600;">
                                        <i class="fas fa-poll"></i> GA-1.1: Sondeo de protocolos
                                    </span>
                                    <span style="color: var(--uide-accent); font-size: 1rem; font-weight: 700;">1
                                        pt</span>
                                </div>
                                <p style="color: #cbd5e1; font-size: 0.85rem; margin: 0; line-height: 1.4;">
                                    ¿Cuándo usar HTTP/2, WebSockets, gRPC?
                                </p>
                            </div>

                            <!-- PE-1.3 -->
                            <div
                                style="background: rgba(74, 222, 128, 0.15); padding: 15px; border-radius: 10px; border-left: 4px solid #4ade80;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                    <span style="color: #e2e8f0; font-size: 1rem; font-weight: 600;">
                                        <i class="fas fa-flask"></i> PE-1.3: Lab eco-service
                                    </span>
                                    <span style="color: var(--uide-accent); font-size: 1rem; font-weight: 700;">2.25
                                        pts</span>
                                </div>
                                <p style="color: #cbd5e1; font-size: 0.85rem; margin: 0; line-height: 1.4;">
                                    Servicio Node.js con JSON y Protobuf
                                </p>
                            </div>

                            <!-- TA-1.3 -->
                            <div
                                style="background: rgba(233, 171, 33, 0.15); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                    <span style="color: #e2e8f0; font-size: 1rem; font-weight: 600;">
                                        <i class="fas fa-file-code"></i> TA-1.3: Postman collection
                                    </span>
                                    <span style="color: var(--uide-accent); font-size: 1rem; font-weight: 700;">2.25
                                        pts</span>
                                </div>
                                <p style="color: #cbd5e1; font-size: 0.85rem; margin: 0; line-height: 1.4;">
                                    Collection + script de cliente
                                </p>
                            </div>

                            <!-- Total -->
                            <div
                                style="background: rgba(233, 171, 33, 0.2); padding: 15px; border-radius: 10px; border: 2px solid var(--uide-accent); margin-top: 5px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="color: var(--uide-accent); font-size: 1.1rem; font-weight: 700;">
                                        <i class="fas fa-star"></i> Total Semana 3
                                    </span>
                                    <span style="color: var(--uide-accent); font-size: 1.3rem; font-weight: 700;">5.5
                                        pts</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Columna Derecha: Herramientas -->
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div
                        style="padding: 20px; background: rgba(35, 53, 110, 0.3); border-radius: 12px; border: 2px solid #60a5fa;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="color: #60a5fa; font-size: 1.3rem; margin: 0;">
                                <i class="fas fa-tools"></i> Herramientas
                            </h3>
                            <button onclick="copyToolsPMSBD()" class="teacher-copy-btn-pmsbd"
                                style="display: none; background: rgba(74, 222, 128, 0.2); border: 1px solid #4ade80; color: #4ade80; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;"
                                onmouseover="this.style.background='rgba(74, 222, 128, 0.3)'"
                                onmouseout="this.style.background='rgba(74, 222, 128, 0.2)'">
                                <i class="fas fa-copy"></i> Copiar
                            </button>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div
                                style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                                <i class="fas fa-code" style="color: #4ade80; margin-right: 8px;"></i>
                                <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Node.js +
                                    Express</span>
                            </div>
                            <div
                                style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                                <i class="fas fa-cube" style="color: #4ade80; margin-right: 8px;"></i>
                                <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Protocol Buffers
                                    (Protobuf)</span>
                            </div>
                            <div
                                style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                                <i class="fas fa-rocket" style="color: #4ade80; margin-right: 8px;"></i>
                                <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Postman (testing de
                                    APIs)</span>
                            </div>
                            <div
                                style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                                <i class="fas fa-network-wired" style="color: #4ade80; margin-right: 8px;"></i>
                                <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">gRPC
                                    framework</span>
                            </div>
                            <div
                                style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                                <i class="fas fa-bolt" style="color: #4ade80; margin-right: 8px;"></i>
                                <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">WebSockets</span>
                            </div>
                            <div
                                style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                                <i class="fas fa-book" style="color: #4ade80; margin-right: 8px;"></i>
                                <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Documentación
                                    técnica</span>
                            </div>
                        </div>
                    </div>

                    <div
                        style="background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <p style="margin: 0; font-size: 0.9rem; color: #e2e8f0; font-weight: 600;">
                                <i class="fas fa-graduation-cap"></i> Unidad 2: Protocolos y Seguridad
                            </p>
                            <button onclick="copyUnitTitlePMSBD()" class="teacher-copy-btn-pmsbd"
                                style="display: none; background: rgba(233, 171, 33, 0.2); border: 1px solid var(--uide-accent); color: var(--uide-accent); padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;"
                                onmouseover="this.style.background='rgba(233, 171, 33, 0.3)'"
                                onmouseout="this.style.background='rgba(233, 171, 33, 0.2)'">
                                <i class="fas fa-copy"></i> Copiar
                            </button>
                        </div>
                        <p style="margin: 0; font-size: 0.85rem; color: #cbd5e1; line-height: 1.5;">
                            HTTP/2, WebSockets, gRPC • JSON, Protobuf, MessagePack • XML básico y rol enterprise
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: Objetivos -->
        <div class="slide">
            <h2><i class="fas fa-bullseye"></i> Objetivos de la Presentación</h2>
            <ul>
                <li>Dominar <span class="highlight">protocolos de comunicación de alto rendimiento</span> (HTTP/2,
                    WebSockets, gRPC)</li>
                <li>Analizar <span class="highlight">formatos de serialización</span> modernos (JSON, Protobuf,
                    MessagePack)</li>
                <li>Comprender el <span class="highlight">rol básico y empresarial de XML</span></li>
                <li>Evaluar <span class="highlight">ventajas y limitaciones</span> de cada tecnología</li>
                <li>Aplicar criterios de <span class="highlight">selección tecnológica</span> según contexto</li>
            </ul>
        </div>

        <!-- Slide 3: Agenda -->
        <div class="slide">
            <h2><i class="fas fa-list-check"></i> Agenda</h2>
            <div class="content-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-bolt"></i> 1. HTTP/2</h3>
                    <p>Protocolo moderno de transporte</p>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-plug"></i> 2. WebSockets</h3>
                    <p>Conexión persistente bidireccional</p>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-rocket"></i> 3. gRPC</h3>
                    <p>RPC moderno de alto rendimiento</p>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-file-code"></i> 4. Serialización</h3>
                    <p>JSON, Protobuf, MessagePack</p>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-code"></i> 5. XML</h3>
                    <p>Rol básico y empresarial</p>
                </div>
            </div>
        </div>

        <!-- Slide 4a: HTTP/2 - Introducción y Multiplexación -->
        <div class="slide">
            <h2 style="margin-bottom: 0.8rem;"><i class="fas fa-globe"></i> HTTP/2: Multiplexación de Streams</h2>

            <div
                style="display: grid; grid-template-columns: 40% 60%; gap: 20px; height: calc(100vh - 200px); max-height: 640px;">
                <!-- Columna Izquierda: Características -->
                <div style="display: flex; flex-direction: column; gap: 10px; height: 100%;">
                    <div class="quote" style="font-size: 0.8rem; padding: 10px; margin: 0;">
                        "La app móvil del Banco de Loja carga 8 recursos simultáneamente"
                    </div>

                    <div style="flex-shrink: 0;">
                        <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Características</h3>
                        <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                            <li><strong>Binario</strong>: Más eficiente</li>
                            <li><strong>Multiplexación</strong>: Streams paralelos</li>
                            <li><strong>HPACK</strong>: Compresión headers</li>
                            <li><strong>Server push</strong>: Envío proactivo</li>
                        </ul>
                    </div>

                    <div
                        style="background: rgba(233, 171, 33, 0.1); padding: 8px; border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                        <p style="font-size: 0.75rem; margin: 0;">
                            <i class="fas fa-info-circle"></i> Base para gRPC y app móvil
                        </p>
                    </div>

                    <!-- Info adicional -->
                    <div
                        style="background: rgba(35, 53, 110, 0.3); padding: 10px; border-radius: 8px; border-left: 4px solid #60a5fa; flex-shrink: 0;">
                        <h4 style="font-size: 0.85rem; margin-bottom: 6px; color: #60a5fa;">
                            <i class="fas fa-info-circle"></i> ¿Qué es Multiplexación?
                        </h4>
                        <p style="font-size: 0.75rem; margin: 0; line-height: 1.4;">
                            Permite enviar múltiples requests/responses simultáneamente sobre una sola conexión TCP,
                            eliminando el bloqueo de HTTP/1.1
                        </p>
                    </div>

                    <div style="text-align: center; margin-top: auto; flex-shrink: 0;">
                        <button id="startHttp2Demo"
                            style="padding: 8px 12px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 6px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.3s; width: 100%;">
                            <i class="fas fa-play"></i> Iniciar Demo
                        </button>
                        <div id="http2Controls" style="margin-top: 6px; font-size: 0.75rem;">
                            <label style="color: #e2e8f0;">Requests: </label>
                            <input type="number" id="http2Requests" value="6" min="3" max="10"
                                style="width: 50px; padding: 3px; background: rgba(255,255,255,0.1); border: 1px solid var(--uide-accent); color: white; border-radius: 4px; font-size: 0.75rem;">
                        </div>
                    </div>
                </div>

                <!-- Columna Derecha: Visualización Comparativa -->
                <div id="http2DemoContainer" style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                    <!-- Demo Multiplexación -->
                    <div id="demoMultiplex" class="http2-demo-content"
                        style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                        <!-- HTTP/1.1 -->
                        <div
                            style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #f87171; padding: 10px; flex: 1; display: flex; flex-direction: column; min-height: 0; max-height: 45%;">
                            <h3
                                style="text-align: center; color: #f87171; margin: 0 0 8px 0; font-size: 0.9rem; flex-shrink: 0;">
                                <i class="fas fa-times-circle"></i> HTTP/1.1 - Conexiones Secuenciales
                            </h3>
                            <div
                                style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 8px; position: relative; overflow: hidden; min-height: 0; height: 200px;">
                                <canvas id="http1Canvas" style="display: block;"></canvas>
                            </div>
                            <div id="http1Time"
                                style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #f87171; flex-shrink: 0;">
                                Tiempo: -</div>
                        </div>

                        <!-- HTTP/2 -->
                        <div
                            style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #4ade80; padding: 10px; flex: 1; display: flex; flex-direction: column; min-height: 0; max-height: 45%;">
                            <h3
                                style="text-align: center; color: #4ade80; margin: 0 0 8px 0; font-size: 0.9rem; flex-shrink: 0;">
                                <i class="fas fa-check-circle"></i> HTTP/2 - Multiplexación (Streams Paralelos)
                            </h3>
                            <div
                                style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 8px; position: relative; overflow: hidden; min-height: 0; height: 200px;">
                                <canvas id="http2Canvas" style="display: block;"></canvas>
                            </div>
                            <div id="http2Time"
                                style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #4ade80; flex-shrink: 0;">
                                Tiempo: -</div>
                        </div>

                        <!-- Comparación de mejora -->
                        <div
                            style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                            <div id="http2Improvement"
                                style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                                Comparación de rendimiento HTTP/1.1 vs HTTP/2
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Slide 4b: HTTP/2 - Arquitectura y Flujo -->
        <div class="slide">
            <h2><i class="fas fa-sitemap"></i> HTTP/2: Arquitectura y Flujo de Comunicación</h2>

            <div style="display: flex; flex-direction: column; height: calc(100vh - 180px); padding: 1rem;">
                <div class="mermaid"
                    style="flex: 1; background: white; border-radius: 12px; padding: 2rem; display: flex; align-items: center; justify-content: center;">
                    sequenceDiagram
                    participant Cliente as Cliente<br />(App Banco de Loja)
                    participant Conn as Conexión TCP<br />Única
                    participant Server as Servidor HTTP/2

                    Note over Cliente,Server: Conexión TLS establecida

                    rect rgb(233, 171, 33, 0.1)
                    Note over Cliente,Server: Multiplexing - Streams Paralelos

                    par Stream 1: Saldo
                    Cliente->>+Server: GET /api/saldo<br />Stream ID: 1
                    Server-->>-Cliente: 200 OK {balance: 5000}<br />Stream ID: 1
                    and Stream 3: Transacciones
                    Cliente->>+Server: GET /api/transactions<br />Stream ID: 3
                    Server-->>-Cliente: 200 OK [...]<br />Stream ID: 3
                    and Stream 5: Perfil
                    Cliente->>+Server: GET /api/profile<br />Stream ID: 5
                    Server-->>-Cliente: 200 OK {name: "..."}<br />Stream ID: 5
                    end
                    end

                    rect rgb(100, 200, 100, 0.1)
                    Note over Server,Cliente: Server Push - Proactivo
                    Server->>Cliente: PUSH /static/logo.png<br />Stream ID: 2
                    Server->>Cliente: PUSH /static/styles.css<br />Stream ID: 4
                    end

                    rect rgb(100, 150, 255, 0.1)
                    Note over Cliente,Server: HPACK - Compresión de Headers
                    Note left of Cliente: Header Table<br />:method: GET<br />:scheme: https<br />authorization: ...
                    Note right of Server: Header Table<br />(mismo contenido)
                    Cliente->>Server: Solo índices de tabla<br />(ahorro 70-80%)
                    end
                </div>

                <div
                    style="margin-top: 1rem; padding: 1rem; background: rgba(233, 171, 33, 0.1); border-radius: 8px; border-left: 4px solid var(--uide-accent);">
                    <p style="font-size: 0.95rem; margin: 0; text-align: center;">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Una sola conexión TCP</strong> maneja múltiples streams paralelos, con compresión de
                        headers y envío proactivo de recursos
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 4d: HTTP/2 - HPACK y Server Push -->
        <div class="slide">
            <h2 style="margin-bottom: 1rem;"><i class="fas fa-compress-alt"></i> HTTP/2: Optimizaciones Clave</h2>

            <div
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; height: calc(100vh - 180px); max-width: 100%; padding: 0;">
                <!-- HPACK -->
                <div style="display: flex; flex-direction: column; gap: 0.8rem;">
                    <div
                        style="text-align: center; padding: 0.5rem; background: rgba(233, 171, 33, 0.1); border-radius: 8px;">
                        <i class="fas fa-file-archive" style="font-size: 2rem; color: var(--uide-accent);"></i>
                        <h3 style="color: var(--uide-accent); margin: 0.3rem 0; font-size: 1.4rem;">HPACK</h3>
                        <p style="color: #94a3b8; font-size: 0.95rem; margin: 0;">Compresión de Headers</p>
                        <p class="quote" style="font-size: 0.85rem; margin: 0.5rem 0 0 0; padding: 0;">
                            "Reduce headers en 80%"
                        </p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; flex: 1;">
                        <div
                            style="background: rgba(248, 113, 113, 0.1); border: 2px solid #f87171; border-radius: 10px; padding: 1.2rem; display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 1rem;">
                                <span style="color: #f87171; font-size: 1.1rem; font-weight: 600;">
                                    <i class="fas fa-times-circle"></i> Sin HPACK
                                </span>
                            </div>
                            <div
                                style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                                <div style="margin-bottom: 1rem;">
                                    <i class="fas fa-file"
                                        style="font-size: 2rem; color: #f87171; margin: 0 0.3rem;"></i>
                                    <i class="fas fa-file"
                                        style="font-size: 2rem; color: #f87171; margin: 0 0.3rem;"></i>
                                    <i class="fas fa-file"
                                        style="font-size: 2rem; color: #f87171; margin: 0 0.3rem;"></i>
                                    <i class="fas fa-file"
                                        style="font-size: 2rem; color: #f87171; margin: 0 0.3rem;"></i>
                                    <i class="fas fa-file"
                                        style="font-size: 2rem; color: #f87171; margin: 0 0.3rem;"></i>
                                </div>
                                <div style="color: #f87171; font-weight: 700; font-size: 1.8rem;">850 bytes</div>
                                <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 0.8rem;">Headers completos
                                    repetidos</div>
                            </div>
                        </div>

                        <div
                            style="background: rgba(74, 222, 128, 0.1); border: 2px solid #4ade80; border-radius: 10px; padding: 1.2rem; display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 1rem;">
                                <span style="color: #4ade80; font-size: 1.1rem; font-weight: 600;">
                                    <i class="fas fa-check-circle"></i> Con HPACK
                                </span>
                            </div>
                            <div
                                style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                                <div style="margin-bottom: 1rem;">
                                    <i class="fas fa-file" style="font-size: 2rem; color: #4ade80;"></i>
                                </div>
                                <div style="color: #4ade80; font-weight: 700; font-size: 1.8rem;">150 bytes</div>
                                <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 0.8rem;">Solo índices de
                                    tabla</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Server Push -->
                <div style="display: flex; flex-direction: column; gap: 0.8rem;">
                    <div
                        style="text-align: center; padding: 0.5rem; background: rgba(233, 171, 33, 0.1); border-radius: 8px;">
                        <i class="fas fa-rocket" style="font-size: 2rem; color: var(--uide-accent);"></i>
                        <h3 style="color: var(--uide-accent); margin: 0.3rem 0; font-size: 1.4rem;">Server Push</h3>
                        <p style="color: #94a3b8; font-size: 0.95rem; margin: 0;">Envío Anticipado</p>
                        <p class="quote" style="font-size: 0.85rem; margin: 0.5rem 0 0 0; padding: 0;">
                            "El servidor envía sin esperar"
                        </p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; flex: 1;">
                        <div
                            style="background: rgba(248, 113, 113, 0.1); border: 2px solid #f87171; border-radius: 10px; padding: 1.2rem; display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 1rem;">
                                <span style="color: #f87171; font-size: 1.1rem; font-weight: 600;">
                                    <i class="fas fa-times-circle"></i> Tradicional
                                </span>
                            </div>
                            <div
                                style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                                <div style="font-size: 1.4rem; text-align: center; line-height: 2; color: #e2e8f0;">
                                    <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-server"></i><br>
                                    <i class="fas fa-server"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-mobile-alt"></i> <span style="font-size: 0.9rem;">HTML</span><br>
                                    <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-server"></i> <span style="font-size: 0.9rem;">(CSS)</span><br>
                                    <i class="fas fa-server"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-mobile-alt"></i> <span style="font-size: 0.9rem;">CSS</span><br>
                                    <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-server"></i> <span style="font-size: 0.9rem;">(JS)</span><br>
                                    <i class="fas fa-server"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-mobile-alt"></i> <span style="font-size: 0.9rem;">JS</span>
                                </div>
                                <div
                                    style="color: #f87171; font-weight: 700; text-align: center; margin-top: 1rem; font-size: 1.2rem;">
                                    <i class="fas fa-clock"></i> 6 viajes
                                </div>
                            </div>
                        </div>

                        <div
                            style="background: rgba(74, 222, 128, 0.1); border: 2px solid #4ade80; border-radius: 10px; padding: 1.2rem; display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 1rem;">
                                <span style="color: #4ade80; font-size: 1.1rem; font-weight: 600;">
                                    <i class="fas fa-check-circle"></i> Con Server Push
                                </span>
                            </div>
                            <div
                                style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                                <div style="font-size: 1.4rem; text-align: center; line-height: 2; color: #e2e8f0;">
                                    <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-server"></i><br>
                                    <i class="fas fa-server"></i> <i class="fas fa-arrow-right"></i> <i
                                        class="fas fa-mobile-alt"></i> <span style="font-size: 0.9rem;">HTML + CSS +
                                        JS</span>
                                </div>
                                <div
                                    style="color: #4ade80; font-weight: 700; text-align: center; margin-top: 1rem; font-size: 1.2rem;">
                                    <i class="fas fa-clock"></i> 2 viajes
                                </div>
                                <div style="color: #4ade80; text-align: center; margin-top: 0.5rem; font-size: 1rem;">
                                    (3x más rápido)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div
                style="text-align: center; padding: 1rem; background: rgba(233, 171, 33, 0.15); border-radius: 10px; border: 2px solid var(--uide-accent);">
                <p style="font-size: 1.1rem; margin: 0; color: #ffffff; font-weight: 600;">
                    <i class="fas fa-lightbulb" style="color: var(--uide-accent);"></i>
                    <strong>Resultado:</strong> Menos datos + menos viajes = App del Banco de Loja más rápida
                </p>
            </div>
        </div>

        <!-- Slide 4e: HTTP/2 - Implementación -->
        <div class="slide">
            <h2><i class="fas fa-code"></i> HTTP/2: Implementación en Node.js</h2>

            <div class="code-tabs-container">
                <div class="code-tabs-header">
                    <button class="code-tab-btn active" data-tab="http2-server">
                        <i class="fas fa-server"></i> Servidor
                    </button>
                    <button class="code-tab-btn" data-tab="http2-client">
                        <i class="fas fa-desktop"></i> Cliente
                    </button>
                    <button class="code-tab-btn" data-tab="http2-push">
                        <i class="fas fa-rocket"></i> Server Push
                    </button>
                </div>

                <!-- Tab Servidor HTTP/2 -->
                <div class="code-tab-content active" data-tab="http2-server">""
                    <div class="code-container" style="margin: 0; border: none; border-radius: 0;">
                        <div class="code-header">
                            <div class="code-title">
                                <i class="fas fa-server"></i> servidor-http2.js
                            </div>
                            <span class="code-language">Node.js ES2025</span>
                        </div>
                        <div class="code-content" style="max-height: 450px;">
                            <pre class="line-numbers"><code class="language-javascript">// Servidor HTTP/2 del Banco de Loja - ES2025
import http2 from 'http2';
import fs from 'fs/promises';
import { createReadStream } from 'fs';
import path from 'path';

class ServidorHTTP2 {
  #server = null;
  #config = {
    port: 8443,
    keyPath: './certs/server.key',
    certPath: './certs/server.crt'
  };

  constructor(config = {}) {
    this.#config = { ...this.#config, ...config };
  }

  async iniciar() {
    // Leer certificados SSL para HTTP/2
    const [key, cert] = await Promise.all([
      fs.readFile(this.#config.keyPath),
      fs.readFile(this.#config.certPath)
    ]);

    // Crear servidor HTTP/2 seguro
    this.#server = http2.createSecureServer({
      key,
      cert,
      allowHTTP1: false // Solo HTTP/2
    });

    this.#server.on('stream', this.#handleStream.bind(this));
    this.#server.on('error', this.#handleError.bind(this));

    return new Promise((resolve) => {
      this.#server.listen(this.#config.port, () => {
        console.log(`Servidor HTTP/2 en puerto ${this.#config.port}`);
        resolve();
      });
    });
  }

  #handleStream(stream, headers) {
    const path = headers[':path'];
    const method = headers[':method'];

    console.log(`${method} ${path}`);

    // Enrutamiento simple
    const routes = {
      '/': () => this.#servirHTML(stream),
      '/api/cuenta': () => this.#servirJSON(stream),
      '/api/transferencias': () => this.#servirTransferencias(stream)
    };

    const handler = routes[path] ?? (() => this.#error404(stream));
    handler();
  }

  async #servirHTML(stream) {
    stream.respond({
      ':status': 200,
      'content-type': 'text/html; charset=utf-8'
    });

    stream.end(\`
      &lt;!DOCTYPE html&gt;
      &lt;html&gt;
        &lt;head&gt;
          &lt;title&gt;Banco de Loja - HTTP/2&lt;/title&gt;
          &lt;link rel="stylesheet" href="/css/styles.css"&gt;
          &lt;script src="/js/app.js"&gt;&lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;
          &lt;h1&gt;Bienvenido al Banco de Loja&lt;/h1&gt;
          &lt;p&gt;Conexión segura HTTP/2&lt;/p&gt;
        &lt;/body&gt;
      &lt;/html&gt;
    \`);
  }

  #servirJSON(stream) {
    stream.respond({
      ':status': 200,
      'content-type': 'application/json'
    });

    stream.end(JSON.stringify({
      cuenta: 'CTA-00123456',
      titular: 'Juan Pérez',
      saldo: 5000.00,
      tipo: 'Ahorros'
    }));
  }

  async #servirTransferencias(stream) {
    // Simulación de consulta a base de datos
    const transferencias = [
      { id: 1, monto: 500, fecha: '2025-01-10', tipo: 'DEBITO' },
      { id: 2, monto: 1500, fecha: '2025-01-09', tipo: 'CREDITO' }
    ];

    stream.respond({
      ':status': 200,
      'content-type': 'application/json'
    });

    stream.end(JSON.stringify(transferencias));
  }

  #error404(stream) {
    stream.respond({ ':status': 404 });
    stream.end('No encontrado');
  }

  #handleError(error) {
    console.error('Error en servidor:', error);
  }

  async detener() {
    return new Promise((resolve) => {
      this.#server?.close(() => {
        console.log('Servidor HTTP/2 detenido');
        resolve();
      });
    });
  }
}

// Uso
const servidor = new ServidorHTTP2();
await servidor.iniciar();</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Tab Cliente HTTP/2 -->
                <div class="code-tab-content" data-tab="http2-client">
                    <div class="code-container" style="margin: 0; border: none; border-radius: 0;">
                        <div class="code-header">
                            <div class="code-title">
                                <i class="fas fa-desktop"></i> cliente-http2.js
                            </div>
                            <span class="code-language">Node.js ES2025</span>
                        </div>
                        <div class="code-content" style="max-height: 450px;">
                            <pre class="line-numbers"><code class="language-javascript">// Cliente HTTP/2 del Banco de Loja - ES2025
import http2 from 'http2';

class ClienteHTTP2 {
  #client = null;
  #config = {
    serverUrl: 'https://localhost:8443'
  };

  constructor(config = {}) {
    this.#config = { ...this.#config, ...config };
  }

  conectar() {
    this.#client = http2.connect(this.#config.serverUrl, {
      rejectUnauthorized: false // Solo para desarrollo
    });

    this.#client.on('error', (error) => {
      console.error('Error de conexión:', error);
    });
  }

  // Realizar múltiples requests simultáneos (Multiplexación)
  async requestsMultiples(rutas) {
    console.log('Iniciando requests múltiples en paralelo...');

    const promises = rutas.map((ruta) => this.#request(ruta));

    const inicio = Date.now();
    const resultados = await Promise.all(promises);
    const duracion = Date.now() - inicio;

    console.log(`Completados ${rutas.length} requests en ${duracion}ms`);

    return resultados;
  }

  #request(path) {
    return new Promise((resolve, reject) => {
      const req = this.#client.request({
        ':path': path,
        ':method': 'GET'
      });

      let data = '';

      req.on('response', (headers) => {
        console.log(`Respuesta de ${path}: ${headers[':status']}`);
      });

      req.on('data', (chunk) => {
        data += chunk;
      });

      req.on('end', () => {
        resolve({
          path,
          data: data.toString()
        });
      });

      req.on('error', reject);
      req.end();
    });
  }

  desconectar() {
    this.#client?.close();
  }
}

// Uso: Multiplexación HTTP/2
const cliente = new ClienteHTTP2();
cliente.conectar();

// Realizar 6 requests simultáneos (Multiplexación)
const rutas = [
  '/api/cuenta',
  '/api/transferencias',
  '/api/movimientos',
  '/api/saldo',
  '/api/beneficiarios',
  '/api/notificaciones'
];

const resultados = await cliente.requestsMultiples(rutas);
console.log('Resultados:', resultados);

cliente.desconectar();</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Tab Server Push -->
                <div class="code-tab-content" data-tab="http2-push">
                    <div class="code-container" style="margin: 0; border: none; border-radius: 0;">
                        <div class="code-header">
                            <div class="code-title">
                                <i class="fas fa-rocket"></i> server-push.js
                            </div>
                            <span class="code-language">Node.js ES2025</span>
                        </div>
                        <div class="code-content" style="max-height: 450px;">
                            <pre class="line-numbers"><code class="language-javascript">// Server Push HTTP/2 - ES2025
import http2 from 'http2';
import fs from 'fs/promises';

class ServidorConPush {
  #server = null;

  async iniciar() {
    const [key, cert] = await Promise.all([
      fs.readFile('./certs/server.key'),
      fs.readFile('./certs/server.crt')
    ]);

    this.#server = http2.createSecureServer({ key, cert });

    this.#server.on('stream', (stream, headers) => {
      const path = headers[':path'];

      if (path === '/') {
        this.#servirConPush(stream);
      }
    });

    this.#server.listen(8443);
  }

  #servirConPush(stream) {
    // Server Push: Enviar recursos antes de que el cliente los pida

    // 1. Push de CSS
    stream.pushStream({
      ':path': '/css/styles.css'
    }, (err, pushStream) => {
      if (err) return;

      pushStream.respond({
        ':status': 200,
        'content-type': 'text/css'
      });

      pushStream.end(`
        body {
          font-family: Arial, sans-serif;
          background: #0f1419;
          color: white;
        }
      `);
    });

    // 2. Push de JavaScript
    stream.pushStream({
      ':path': '/js/app.js'
    }, (err, pushStream) => {
      if (err) return;

      pushStream.respond({
        ':status': 200,
        'content-type': 'application/javascript'
      });

      pushStream.end(`
        console.log('App cargada desde Server Push');

        // Inicializar app del Banco de Loja
        document.addEventListener('DOMContentLoaded', () => {
          console.log('DOM Ready - HTTP/2 Server Push activo');
        });
      `);
    });

    // 3. Push de datos JSON
    stream.pushStream({
      ':path': '/api/cuenta'
    }, (err, pushStream) => {
      if (err) return;

      pushStream.respond({
        ':status': 200,
        'content-type': 'application/json'
      });

      pushStream.end(JSON.stringify({
        cuenta: 'CTA-00123456',
        saldo: 5000.00,
        nombre: 'Juan Pérez'
      }));
    });

    // Enviar HTML principal
    stream.respond({
      ':status': 200,
      'content-type': 'text/html'
    });

    stream.end(\`
      &lt;!DOCTYPE html&gt;
      &lt;html&gt;
        &lt;head&gt;
          &lt;title&gt;Banco de Loja&lt;/title&gt;
          &lt;link rel="stylesheet" href="/css/styles.css"&gt;
          &lt;script src="/js/app.js"&gt;&lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;
          &lt;h1&gt;Server Push Activo&lt;/h1&gt;
          &lt;p&gt;Los recursos fueron enviados proactivamente&lt;/p&gt;
        &lt;/body&gt;
      &lt;/html&gt;
    \`);

    console.log('HTML enviado con 3 recursos en Server Push');
  }
}

// Uso
const servidor = new ServidorConPush();
await servidor.iniciar();
console.log('Servidor con Server Push en puerto 8443');</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div
                style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; margin-top: 8px;">
                <p style="color: var(--uide-accent); font-size: 0.8rem; margin: 0;">
                    <i class="fas fa-bolt"></i>
                    <strong>HTTP/2</strong> permite multiplexación (múltiples streams en una conexión),
                    compresión HPACK de headers y Server Push proactivo de recursos.
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 5a: WebSockets - Comparación Visual -->
    <div class="slide">
        <h2 style="margin-bottom: 1.5rem;"><i class="fas fa-plug"></i> WebSockets: Comparación de Comunicación</h2>

        <div
            style="height: calc(100vh - 200px); display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; padding: 0 2rem;">
            <!-- Columna Izquierda: HTTP Polling -->
            <div style="display: flex; flex-direction: column; height: 100%; justify-content: center;">
                <div
                    style="text-align: center; padding: 1rem; background: rgba(248, 113, 113, 0.1); border-radius: 10px; border: 2px solid #f87171; margin-bottom: 2rem;">
                    <i class="fas fa-sync-alt" style="font-size: 2.5rem; color: #f87171;"></i>
                    <h3 style="color: #f87171; margin: 0.8rem 0 0.3rem 0; font-size: 1.6rem;">HTTP Polling</h3>
                    <p style="color: #94a3b8; font-size: 1rem; margin: 0;">Conexiones Repetidas</p>
                </div>

                <div
                    style="background: rgba(15, 20, 25, 0.6); border-radius: 12px; padding: 3rem; display: flex; align-items: center; justify-content: center;">
                    <div style="font-size: 1.6rem; text-align: center; line-height: 3.5; color: #e2e8f0;">
                        <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrow-right"></i> <i
                            class="fas fa-server"></i><br>
                        <span style="font-size: 1.1rem; color: #94a3b8;">¿Hay notificaciones?</span><br>
                        <i class="fas fa-server"></i> <i class="fas fa-arrow-right"></i> <i
                            class="fas fa-mobile-alt"></i><br>
                        <span style="font-size: 1.1rem; color: #94a3b8;">No</span><br>
                        <span style="font-size: 1.1rem; color: #94a3b8;">...</span><br>
                        <i class="fas fa-server"></i> <i class="fas fa-arrow-right"></i> <i
                            class="fas fa-mobile-alt"></i><br>
                        <span style="font-size: 1.1rem; color: #4ade80;">Sí: Depósito $150</span>
                    </div>
                </div>
            </div>

            <!-- Columna Derecha: WebSocket -->
            <div style="display: flex; flex-direction: column; height: 100%; justify-content: center;">
                <div
                    style="text-align: center; padding: 1rem; background: rgba(74, 222, 128, 0.1); border-radius: 10px; border: 2px solid #4ade80; margin-bottom: 2rem;">
                    <i class="fas fa-plug" style="font-size: 2.5rem; color: #4ade80;"></i>
                    <h3 style="color: #4ade80; margin: 0.8rem 0 0.3rem 0; font-size: 1.6rem;">WebSocket</h3>
                    <p style="color: #94a3b8; font-size: 1rem; margin: 0;">Conexión Persistente</p>
                </div>

                <div
                    style="background: rgba(15, 20, 25, 0.6); border-radius: 12px; padding: 3rem; display: flex; align-items: center; justify-content: center;">
                    <div style="font-size: 1.6rem; text-align: center; line-height: 3.5; color: #e2e8f0;">
                        <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrows-alt-h" style="color: #4ade80;"></i> <i
                            class="fas fa-server"></i><br>
                        <span style="font-size: 1.1rem; color: #4ade80;">Conexión abierta</span><br>
                        <span style="font-size: 1.1rem; color: #94a3b8;">... esperando ...</span><br>
                        <i class="fas fa-server"></i> <i class="fas fa-arrow-right" style="color: #4ade80;"></i> <i
                            class="fas fa-mobile-alt"></i><br>
                        <span style="font-size: 1.1rem; color: #4ade80;">¡Depósito $150!</span><br>
                        <span style="font-size: 1.1rem; color: #94a3b8;">... esperando ...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 5a-bis: WebSockets - Ventajas y Desventajas -->
    <div class="slide">
        <h2 style="margin-bottom: 2rem;"><i class="fas fa-balance-scale"></i> WebSockets vs HTTP Polling</h2>

        <div
            style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; padding: 2rem; height: calc(100vh - 220px);">
            <!-- HTTP Polling - Desventajas -->
            <div style="display: flex; flex-direction: column; justify-content: center;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <i class="fas fa-sync-alt" style="font-size: 3rem; color: #f87171;"></i>
                    <h3 style="color: #f87171; margin: 1rem 0; font-size: 1.8rem;">HTTP Polling</h3>
                </div>

                <div
                    style="background: rgba(248, 113, 113, 0.1); padding: 2rem; border-radius: 12px; border: 2px solid #f87171;">
                    <div
                        style="color: #f87171; font-weight: 700; font-size: 1.5rem; margin-bottom: 1.5rem; text-align: center;">
                        <i class="fas fa-times-circle"></i> Desventajas
                    </div>
                    <ul style="font-size: 1.2rem; color: #e2e8f0; margin: 0; padding-left: 2rem; line-height: 2.5;">
                        <li>Múltiples conexiones</li>
                        <li>Latencia alta (1-5s)</li>
                        <li>Desperdicio de recursos</li>
                    </ul>
                </div>
            </div>

            <!-- WebSocket - Ventajas -->
            <div style="display: flex; flex-direction: column; justify-content: center;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <i class="fas fa-plug" style="font-size: 3rem; color: #4ade80;"></i>
                    <h3 style="color: #4ade80; margin: 1rem 0; font-size: 1.8rem;">WebSocket</h3>
                </div>

                <div
                    style="background: rgba(74, 222, 128, 0.1); padding: 2rem; border-radius: 12px; border: 2px solid #4ade80;">
                    <div
                        style="color: #4ade80; font-weight: 700; font-size: 1.5rem; margin-bottom: 1.5rem; text-align: center;">
                        <i class="fas fa-check-circle"></i> Ventajas
                    </div>
                    <ul style="font-size: 1.2rem; color: #e2e8f0; margin: 0; padding-left: 2rem; line-height: 2.5;">
                        <li>Una sola conexión</li>
                        <li>Latencia mínima (5-20ms)</li>
                        <li>Bidireccional (full-duplex)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 5b: WebSockets - Diagrama de Flujo -->
    <div class="slide">
        <h2 style="margin-bottom: 1rem;"><i class="fas fa-exchange-alt"></i> WebSockets: Flujo de Comunicación</h2>

        <div style="display: flex; flex-direction: column; height: calc(100vh - 200px); padding: 0 1rem;">
            <div class="mermaid"
                style="flex: 1; background: white; border-radius: 12px; padding: 1.5rem; display: flex; align-items: center; justify-content: center; overflow: hidden; transform: scale(0.75); transform-origin: center;">
                sequenceDiagram
                participant Cliente as Cliente Web<br />(Banco de Loja)
                participant Server as Servidor WebSocket

                Note over Cliente,Server: 1. Handshake HTTP Upgrade

                Cliente->>Server: GET /ws HTTP/1.1<br />Upgrade: websocket<br />Connection:
                Upgrade<br />Sec-WebSocket-Key: xxx
                Server-->>Cliente: HTTP/1.1 101 Switching Protocols<br />Upgrade: websocket<br />Connection: Upgrade

                rect rgb(100, 200, 100, 0.1)
                Note over Cliente,Server: 2. Conexión WebSocket Establecida (Full-Duplex)

                Cliente->>Server: {type: "auth", token: "JWT..."}
                Server-->>Cliente: {type: "auth_ok", userId: "12345"}

                par Cliente envía mensaje
                Cliente->>Server: {type: "subscribe", cuenta: "2100456789"}
                and Servidor envía notificación
                Server->>Cliente: {type: "balance", monto: 5000}
                end

                Note over Server: Nueva transferencia detectada

                Server->>Cliente: {type: "notification",<br />msg: "Depósito $150"}

                Cliente->>Server: {type: "ack", id: "notif-1"}

                Server->>Cliente: {type: "notification",<br />msg: "Retiro $50"}

                Cliente->>Server: {type: "get_transactions"}
                Server-->>Cliente: {type: "transactions",<br />data: [...]}
                end

                rect rgb(255, 200, 100, 0.1)
                Note over Cliente,Server: 3. Cierre de Conexión

                Cliente->>Server: Close Frame (Code: 1000)
                Server-->>Cliente: Close Frame (Code: 1000)
                end

                Note over Cliente,Server: Ventajas vs HTTP Polling:<br />- Latencia: 5-20ms vs 150-250ms<br />- Sin
                overhead de headers repetidos<br />- Eventos instantáneos del servidor
            </div>

            <div
                style="margin-top: 0.8rem; padding: 0.8rem; background: rgba(233, 171, 33, 0.1); border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                <p style="font-size: 0.9rem; margin: 0; text-align: center;">
                    <i class="fas fa-lightbulb"></i>
                    <strong>Handshake HTTP → Upgrade a WebSocket → Comunicación bidireccional persistente</strong>
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 5c: WebSockets - Arquitectura de Casos de Uso -->
    <div class="slide">
        <h2><i class="fas fa-project-diagram"></i> WebSockets: Arquitectura en Banco de Loja</h2>

        <div style="display: flex; flex-direction: column; height: calc(100vh - 180px); padding: 1rem;">
            <div class="mermaid"
                style="flex: 1; background: white; border-radius: 12px; padding: 2rem; display: flex; align-items: center; justify-content: center;">
                graph TB
                subgraph Clientes["👥 Clientes"]
                AppMovil["📱 App Móvil<br />iOS/Android"]
                WebApp["💻 Web App<br />React/Vue"]
                Tablet["📲 Tablet<br />Ejecutivos"]
                end

                subgraph WSServer["🔌 Servidor WebSocket"]
                WSGateway["WebSocket Gateway<br />Node.js + ws"]
                Auth["🔐 Autenticación<br />JWT"]
                Router["📡 Message Router"]
                end

                subgraph Servicios["⚙️ Servicios Backend"]
                NotifService["🔔 Servicio Notificaciones"]
                TransService["💸 Servicio Transacciones"]
                ChatService["💬 Servicio Chat"]
                AlertService["⚠️ Servicio Alertas"]
                end

                subgraph Database["💾 Base de Datos"]
                Redis["Redis<br />Sesiones activas"]
                MongoDB["MongoDB<br />Historial mensajes"]
                PostgreSQL["PostgreSQL<br />Transacciones"]
                end

                AppMovil -.->|"WS: wss://banco.com/ws"| WSGateway
                WebApp -.->|"WS: wss://banco.com/ws"| WSGateway
                Tablet -.->|"WS: wss://banco.com/ws"| WSGateway

                WSGateway --> Auth
                Auth --> Router

                Router <-->|"Pub/Sub"| NotifService
                    Router <-->|"Pub/Sub"| TransService
                        Router <-->|"Pub/Sub"| ChatService
                            Router <-->|"Pub/Sub"| AlertService

                                NotifService --> Redis
                                TransService --> PostgreSQL
                                ChatService --> MongoDB
                                AlertService --> Redis

                                style Clientes fill:#e0f2fe,stroke:#0284c7,stroke-width:2px
                                style WSServer fill:#dcfce7,stroke:#16a34a,stroke-width:2px
                                style Servicios fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
                                style Database fill:#fce7f3,stroke:#ec4899,stroke-width:2px

                                style WSGateway fill:#4ade80,stroke:#16a34a,stroke-width:3px
                                style Auth fill:#fbbf24,stroke:#f59e0b,stroke-width:2px
                                style Router fill:#60a5fa,stroke:#0284c7,stroke-width:2px
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                <div
                    style="padding: 0.8rem; background: rgba(74, 222, 128, 0.1); border-radius: 8px; border-left: 4px solid #4ade80; text-align: center;">
                    <p style="font-size: 0.9rem; margin: 0; color: #e2e8f0;">
                        <i class="fas fa-bell" style="color: #4ade80;"></i>
                        <strong>Notificaciones:</strong> Transferencias, pagos, alertas
                    </p>
                </div>
                <div
                    style="padding: 0.8rem; background: rgba(96, 165, 250, 0.1); border-radius: 8px; border-left: 4px solid #60a5fa; text-align: center;">
                    <p style="font-size: 0.9rem; margin: 0; color: #e2e8f0;">
                        <i class="fas fa-comments" style="color: #60a5fa;"></i>
                        <strong>Chat:</strong> Soporte en vivo, asesoría
                    </p>
                </div>
                <div
                    style="padding: 0.8rem; background: rgba(251, 191, 36, 0.1); border-radius: 8px; border-left: 4px solid #fbbf24; text-align: center;">
                    <p style="font-size: 0.9rem; margin: 0; color: #e2e8f0;">
                        <i class="fas fa-chart-line" style="color: #fbbf24;"></i>
                        <strong>Datos Live:</strong> Saldos, tasas, cotizaciones
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 6: gRPC Intro -->
    <div class="slide">
        <h2 style="margin-bottom: 0.8rem;"><i class="fas fa-rocket"></i> gRPC: Remote Procedure Call Moderno
        </h2>

        <div
            style="display: grid; grid-template-columns: 40% 60%; gap: 20px; height: calc(100vh - 200px); max-height: 640px;">
            <!-- Columna Izquierda: Características -->
            <div style="display: flex; flex-direction: column; gap: 10px; height: 100%;">
                <div class="quote" style="font-size: 0.8rem; padding: 10px; margin: 0;">
                    "Comunicación entre microsservicios del Banco de Loja"
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Ventajas</h3>
                    <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                        <li><strong>Protobuf</strong>: Binario compacto</li>
                        <li><strong>HTTP/2</strong>: Multiplexación</li>
                        <li><strong>Baja latencia</strong>: Microsservicios</li>
                        <li><strong>Streaming</strong>: Bidireccional</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 8px; border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                    <p style="font-size: 0.75rem; margin: 0;">
                        <i class="fas fa-info-circle"></i> Microsservicios internos del banco
                    </p>
                </div>

                <!-- Pestañas de Demos -->
                <div style="display: flex; gap: 4px; flex-shrink: 0;">
                    <button class="grpc-tab active" data-demo="rpc"
                        style="flex: 1; padding: 6px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        RPC Flow
                    </button>
                    <button class="grpc-tab" data-demo="payload"
                        style="flex: 1; padding: 6px; background: rgba(255,255,255,0.1); color: #e2e8f0; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        JSON vs Protobuf
                    </button>
                    <button class="grpc-tab" data-demo="grpc-diagrama"
                        style="flex: 1; padding: 6px; background: rgba(255,255,255,0.1); color: #e2e8f0; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Diagrama
                    </button>
                    <button class="grpc-tab" data-demo="grpc-codigo"
                        style="flex: 1; padding: 6px; background: rgba(255,255,255,0.1); color: #e2e8f0; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Código
                    </button>
                </div>

                <div style="text-align: center; margin-top: auto; flex-shrink: 0;">
                    <button id="startGrpcDemo"
                        style="padding: 8px 12px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 6px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.3s; width: 100%;">
                        <i class="fas fa-play"></i> Iniciar Demo
                    </button>
                </div>
            </div>

            <!-- Columna Derecha: Visualización -->
            <div id="grpcDemoContainer" style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                <!-- Demo RPC Flow -->
                <div id="demoRpc" class="grpc-demo-content"
                    style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #4ade80; padding: 10px; flex: 1; display: flex; flex-direction: column;">
                        <h3 style="text-align: center; color: #4ade80; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-rocket"></i> gRPC Remote Procedure Call
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow: hidden; height: 450px;">
                            <canvas id="rpcCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="rpcInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #4ade80;">
                            Tiempo: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="rpcResult" style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para ver el flujo RPC
                        </div>
                    </div>
                </div>

                <!-- Demo Payload Comparison -->
                <div id="demoPayload" class="grpc-demo-content"
                    style="display: none; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #60a5fa; padding: 10px; flex: 1; display: flex; flex-direction: column; max-height: 48%;">
                        <h3 style="text-align: center; color: #60a5fa; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-file-code"></i> JSON (Texto)
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow-y: auto; height: 200px;">
                            <canvas id="jsonCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="jsonSize"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #60a5fa;">
                            Tamaño: -</div>
                    </div>

                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #4ade80; padding: 10px; flex: 1; display: flex; flex-direction: column; max-height: 48%;">
                        <h3 style="text-align: center; color: #4ade80; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-file-binary"></i> Protobuf (Binario)
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow-y: auto; height: 200px;">
                            <canvas id="protobufCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="protobufSize"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #4ade80;">
                            Tamaño: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="payloadResult"
                            style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para comparar tamaños
                        </div>
                    </div>
                </div>

                <!-- Demo Diagrama gRPC -->
                <div id="demoGrpc-diagrama" class="grpc-demo-content"
                    style="display: none; flex-direction: column; gap: 12px; height: 100%; overflow-y: auto;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; padding: 16px; flex: 1; display: flex; flex-direction: column;">
                        <h3
                            style="text-align: center; color: var(--uide-accent); margin: 0 0 12px 0; font-size: 0.9rem;">
                            <i class="fas fa-project-diagram"></i> Arquitectura gRPC - Tipos de Streaming
                        </h3>
                        <div class="mermaid"
                            style="background: white; border-radius: 8px; padding: 16px; flex: 1; display: flex; align-items: center; justify-content: center;">
                            graph TB
                            subgraph "Cliente Banco de Loja"
                            C1[Cliente gRPC]
                            end

                            subgraph "Servidor gRPC sobre HTTP/2"
                            S1[Servicio Transferencias]
                            S2[Servicio Consultas]
                            S3[Servicio Notificaciones]
                            end

                            subgraph "1. Unary RPC - Request/Response Simple"
                            C1 -->|"TransferirFondos(req)"| S1
                            S1 -->|"TransferResponse"| C1
                            style S1 fill:#4ade80
                            end

                            subgraph "2. Server Streaming - Múltiples Respuestas"
                            C1 -->|"ObtenerHistorial(req)"| S2
                            S2 -->|"Stream: Transacción 1"| C1
                            S2 -->|"Stream: Transacción 2"| C1
                            S2 -->|"Stream: Transacción N"| C1
                            style S2 fill:#60a5fa
                            end

                            subgraph "3. Bidirectional Streaming - Comunicación Continua"
                            C1 <-->|"MonitorearCuenta()"| S3
                                S3 -->|"Evento: Depósito"| C1
                                S3 -->|"Evento: Retiro"| C1
                                C1 -->|"ACK confirmación"| S3
                                style S3 fill:#f59e0b
                                end

                                subgraph "Protocol Buffers - Serialización"
                                PB[.proto Schema]
                                PB -->|Genera| GEN1[Código Cliente]
                                PB -->|Genera| GEN2[Código Servidor]
                                end

                                S1 -.->|Usa| PB
                                S2 -.->|Usa| PB
                                S3 -.->|Usa| PB

                                style C1 fill:#e9ab21,stroke:#333,stroke-width:3px
                                style PB fill:#94a3b8,stroke:#333,stroke-width:2px
                        </div>
                    </div>
                </div>

                <!-- Demo Código gRPC -->
                <div id="demoGrpc-codigo" class="grpc-demo-content"
                    style="display: none; flex-direction: column; gap: 12px; height: 100%; overflow-y: auto;">

                    <!-- Tabs de código -->
                    <div class="code-tabs-container" style="margin: 0;">
                        <div class="code-tabs-header">
                            <button class="code-tab-btn active" data-tab="grpc-proto">
                                <i class="fas fa-file-contract"></i> .proto
                            </button>
                            <button class="code-tab-btn" data-tab="grpc-server">
                                <i class="fas fa-server"></i> Servidor
                            </button>
                            <button class="code-tab-btn" data-tab="grpc-client">
                                <i class="fas fa-desktop"></i> Cliente
                            </button>
                        </div>

                        <!-- Tab .proto Definition -->
                        <div class="code-tab-content active" data-tab="grpc-proto">
                            <div class="code-container" style="margin: 0; border: none; border-radius: 0;">
                                <div class="code-header">
                                    <div class="code-title">
                                        <i class="fas fa-file-contract"></i> banco.proto
                                    </div>
                                    <span class="code-language">Protocol Buffers</span>
                                </div>
                                <div class="code-content" style="max-height: 450px;">
                                    <pre class="line-numbers"><code class="language-protobuf">syntax = "proto3";

package banco.loja;

// Servicio de Transferencias del Banco de Loja
service TransferenciaService {
  // RPC unario: Una solicitud, una respuesta
  rpc TransferirFondos(TransferenciaRequest) returns (TransferenciaResponse);

  // RPC streaming del servidor: Una solicitud, múltiples respuestas
  rpc ConsultarMovimientos(ConsultaRequest) returns (stream Movimiento);

  // RPC streaming bidireccional: Cliente y servidor envían streams
  rpc MonitorearTransacciones(stream MonitorRequest) returns (stream MonitorResponse);
}

// Mensaje de solicitud de transferencia
message TransferenciaRequest {
  string cuenta_origen = 1;
  string cuenta_destino = 2;
  double monto = 3;
  string concepto = 4;
  string referencia = 5;
}

// Mensaje de respuesta de transferencia
message TransferenciaResponse {
  bool exitoso = 1;
  string transaccion_id = 2;
  double saldo_disponible = 3;
  string mensaje = 4;
  int64 timestamp = 5;
}

// Mensaje de consulta de movimientos
message ConsultaRequest {
  string cuenta = 1;
  int64 fecha_inicio = 2;
  int64 fecha_fin = 3;
}

// Mensaje de movimiento individual
message Movimiento {
  string id = 1;
  string tipo = 2;  // "CREDITO" o "DEBITO"
  double monto = 3;
  string concepto = 4;
  int64 fecha = 5;
}

// Mensajes para monitoring en tiempo real
message MonitorRequest {
  string cuenta = 1;
}

message MonitorResponse {
  string evento = 1;
  string detalle = 2;
  int64 timestamp = 3;
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Servidor gRPC -->
                        <div class="code-tab-content" data-tab="grpc-server">
                            <div class="code-container" style="margin: 0; border: none; border-radius: 0;">
                                <div class="code-header">
                                    <div class="code-title">
                                        <i class="fas fa-server"></i> servidor-grpc.js
                                    </div>
                                    <span class="code-language">Node.js</span>
                                </div>
                                <div class="code-content" style="max-height: 450px;">
                                    <pre class="line-numbers"><code class="language-javascript">// Servidor gRPC del Banco de Loja 
import grpc from '@grpc/grpc-js';
import protoLoader from '@grpc/proto-loader';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

class ServidorGRPC {
  #server = null;
  #proto = null;
  #config = {
    port: '0.0.0.0:50051',
    protoPath: join(__dirname, 'banco.proto')
  };

  constructor(config = {}) {
    this.#config = { ...this.#config, ...config };
    this.#cargarProto();
  }

  #cargarProto() {
    const packageDefinition = protoLoader.loadSync(this.#config.protoPath, {
      keepCase: true,
      longs: String,
      enums: String,
      defaults: true,
      oneofs: true
    });

    this.#proto = grpc.loadPackageDefinition(packageDefinition).banco.loja;
  }

  // 1. RPC Unario: TransferirFondos
  async #transferirFondos(call, callback) {
    const { cuenta_origen, cuenta_destino, monto, concepto } = call.request;

    console.log(`Transferencia: $${monto} de ${cuenta_origen} a ${cuenta_destino}`);

    try {
      // Simular validación y procesamiento asíncrono
      await new Promise(resolve => setTimeout(resolve, 100));

      const saldoDisponible = 5000.00;

      if (monto > saldoDisponible) {
        callback({
          code: grpc.status.FAILED_PRECONDITION,
          message: 'Saldo insuficiente'
        });
        return;
      }

      // Transferencia exitosa
      const response = {
        exitoso: true,
        transaccion_id: `TRX-${Date.now()}`,
        saldo_disponible: saldoDisponible - monto,
        mensaje: 'Transferencia procesada exitosamente',
        timestamp: Date.now()
      };

      callback(null, response);
    } catch (error) {
      callback({
        code: grpc.status.INTERNAL,
        message: error.message
      });
    }
  }

  // 2. RPC Streaming del Servidor: ConsultarMovimientos
  #consultarMovimientos(call) {
    const { cuenta, fecha_inicio, fecha_fin } = call.request;

    console.log(`Consultando movimientos de ${cuenta}`);

    const movimientos = [
      { id: 'MOV-001', tipo: 'CREDITO', monto: 1500.00, concepto: 'Depósito', fecha: Date.now() - 86400000 },
      { id: 'MOV-002', tipo: 'DEBITO', monto: 500.00, concepto: 'Retiro ATM', fecha: Date.now() - 43200000 },
      { id: 'MOV-003', tipo: 'CREDITO', monto: 2000.00, concepto: 'Transferencia recibida', fecha: Date.now() - 7200000 },
      { id: 'MOV-004', tipo: 'DEBITO', monto: 300.00, concepto: 'Pago servicios', fecha: Date.now() - 3600000 }
    ];

    // Enviar cada movimiento como stream
    movimientos.forEach((mov, index) => {
      setTimeout(() => {
        call.write(mov);
        if (index === movimientos.length - 1) {
          call.end();
        }
      }, index * 200);
    });
  }

  // 3. RPC Streaming Bidireccional: MonitorearTransacciones
  #monitorearTransacciones(call) {
    call.on('data', (request) => {
      console.log(`Monitoreando cuenta: ${request.cuenta}`);

      const eventos = ['INICIO_SESION', 'TRANSFERENCIA_ENVIADA', 'TRANSFERENCIA_RECIBIDA'];

      eventos.forEach((evento, index) => {
        setTimeout(() => {
          call.write({
            evento,
            detalle: `Evento de cuenta ${request.cuenta}`,
            timestamp: Date.now()
          });
        }, index * 1000);
      });
    });

    call.on('end', () => {
      call.end();
    });

    call.on('error', (error) => {
      console.error('Error en stream:', error);
    });
  }

  async iniciar() {
    this.#server = new grpc.Server();

    this.#server.addService(this.#proto.TransferenciaService.service, {
      TransferirFondos: this.#transferirFondos.bind(this),
      ConsultarMovimientos: this.#consultarMovimientos.bind(this),
      MonitorearTransacciones: this.#monitorearTransacciones.bind(this)
    });

    return new Promise((resolve, reject) => {
      this.#server.bindAsync(
        this.#config.port,
        grpc.ServerCredentials.createInsecure(),
        (err, port) => {
          if (err) {
            console.error('Error al iniciar servidor:', err);
            reject(err);
            return;
          }
          console.log(`Servidor gRPC escuchando en puerto ${port}`);
          this.#server.start();
          resolve(port);
        }
      );
    });
  }

  detener() {
    return new Promise((resolve) => {
      this.#server?.tryShutdown(() => {
        console.log('Servidor gRPC detenido');
        resolve();
      });
    });
  }
}

// Uso
const servidor = new ServidorGRPC();
await servidor.iniciar();</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Cliente gRPC -->
                        <div class="code-tab-content" data-tab="grpc-client">
                            <div class="code-container" style="margin: 0; border: none; border-radius: 0;">
                                <div class="code-header">
                                    <div class="code-title">
                                        <i class="fas fa-desktop"></i> cliente-grpc.js
                                    </div>
                                    <span class="code-language">Node.js</span>
                                </div>
                                <div class="code-content" style="max-height: 450px;">
                                    <pre class="line-numbers"><code class="language-javascript">// Cliente gRPC del Banco de Loja 
import grpc from '@grpc/grpc-js';
import protoLoader from '@grpc/proto-loader';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

class ClienteGRPC {
  #client = null;
  #config = {
    serverUrl: 'localhost:50051',
    protoPath: join(__dirname, 'banco.proto')
  };

  constructor(config = {}) {
    this.#config = { ...this.#config, ...config };
    this.#conectar();
  }

  #conectar() {
    const packageDefinition = protoLoader.loadSync(this.#config.protoPath, {
      keepCase: true,
      longs: String,
      enums: String,
      defaults: true,
      oneofs: true
    });

    const bancoProto = grpc.loadPackageDefinition(packageDefinition).banco.loja;

    this.#client = new bancoProto.TransferenciaService(
      this.#config.serverUrl,
      grpc.credentials.createInsecure()
    );
  }

  // ===== EJEMPLO 1: RPC Unario =====
  async transferirFondos(datosTransferencia) {
    console.log('\n=== Realizando transferencia (RPC Unario) ===');

    return new Promise((resolve, reject) => {
      this.#client.TransferirFondos(datosTransferencia, (error, response) => {
        if (error) {
          console.error('Error en transferencia:', error.message);
          reject(error);
          return;
        }

        console.log('Transferencia exitosa:');
        console.log(`  ID: ${response.transaccion_id}`);
        console.log(`  Saldo disponible: $${response.saldo_disponible}`);
        console.log(`  Mensaje: ${response.mensaje}`);

        resolve(response);
      });
    });
  }

  // ===== EJEMPLO 2: RPC Streaming del Servidor =====
  async consultarMovimientos(consultaParams) {
    console.log('\n=== Consultando movimientos (Streaming del Servidor) ===');

    return new Promise((resolve, reject) => {
      const movimientos = [];
      const call = this.#client.ConsultarMovimientos(consultaParams);

      call.on('data', (movimiento) => {
        const signo = movimiento.tipo === 'CREDITO' ? '+' : '-';
        console.log(`${signo} $${movimiento.monto} - ${movimiento.concepto} [${movimiento.id}]`);
        movimientos.push(movimiento);
      });

      call.on('end', () => {
        console.log('Consulta de movimientos completada');
        resolve(movimientos);
      });

      call.on('error', (error) => {
        console.error('Error:', error.message);
        reject(error);
      });
    });
  }

  // ===== EJEMPLO 3: RPC Streaming Bidireccional =====
  monitorearTransacciones(cuenta, duracionMs = 5000) {
    console.log('\n=== Monitoreando transacciones (Streaming Bidireccional) ===');

    const call = this.#client.MonitorearTransacciones();

    call.on('data', (response) => {
      const fecha = new Date(parseInt(response.timestamp));
      console.log(`[${fecha.toISOString()}] ${response.evento}: ${response.detalle}`);
    });

    call.on('end', () => {
      console.log('Monitoreo finalizado');
    });

    call.on('error', (error) => {
      console.error('Error en monitoreo:', error.message);
    });

    // Enviar solicitud de monitoreo
    call.write({ cuenta });

    // Cerrar stream después del tiempo especificado
    setTimeout(() => {
      call.end();
    }, duracionMs);

    return call;
  }
}

// ===== USO DEL CLIENTE =====
const cliente = new ClienteGRPC();

// Ejemplo 1: Transferencia
await cliente.transferirFondos({
  cuenta_origen: 'CTA-00123456',
  cuenta_destino: 'CTA-00789012',
  monto: 1500.00,
  concepto: 'Pago de servicios',
  referencia: 'REF-001'
});

// Ejemplo 2: Consultar movimientos
const movimientos = await cliente.consultarMovimientos({
  cuenta: 'CTA-00123456',
  fecha_inicio: Date.now() - 30 * 86400000,
  fecha_fin: Date.now()
});

// Ejemplo 3: Monitorear transacciones
cliente.monitorearTransacciones('CTA-00123456', 5000);</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; margin-top: 8px;">
                        <p style="color: var(--uide-accent); font-size: 0.8rem; margin: 0;">
                            <i class="fas fa-rocket"></i>
                            <strong>gRPC</strong> usa HTTP/2 y Protobuf para comunicación ultra-rápida entre
                            microservicios.
                            Soporta RPC unario, streaming del servidor, cliente y bidireccional.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 7: gRPC Limitaciones -->
    <div class="slide">
        <h2 style="margin-bottom: 0.8rem;"><i class="fas fa-exclamation-triangle"></i> gRPC: Limitaciones y
            Trade-offs</h2>

        <div
            style="display: grid; grid-template-columns: 40% 60%; gap: 20px; height: calc(100vh - 200px); max-height: 640px;">
            <!-- Columna Izquierda: Características -->
            <div style="display: flex; flex-direction: column; gap: 10px; height: 100%;">
                <div class="quote" style="font-size: 0.8rem; padding: 10px; margin: 0;">
                    "Más dependencias = más actualizaciones frecuentes"
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Complejidad</h3>
                    <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                        <li><strong>Dependencias</strong>: Numerosas</li>
                        <li><strong>Actualizaciones</strong>: Frecuentes</li>
                        <li><strong>Acoplamiento</strong>: Fuerte</li>
                        <li><strong>Debugging</strong>: Complejo</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(248, 113, 113, 0.1); padding: 8px; border-radius: 8px; border-left: 4px solid #f87171; flex-shrink: 0;">
                    <p style="font-size: 0.75rem; margin: 0;">
                        <i class="fas fa-exclamation-triangle"></i> HTTP/2 requerido
                    </p>
                </div>

                <!-- Pestañas de Demos -->
                <div style="display: flex; gap: 4px; flex-shrink: 0;">
                    <button class="grpc-limit-tab active" data-demo="dependencies"
                        style="flex: 1; padding: 6px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Dependencias
                    </button>
                    <button class="grpc-limit-tab" data-demo="updates"
                        style="flex: 1; padding: 6px; background: rgba(255,255,255,0.1); color: #e2e8f0; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Actualizaciones
                    </button>
                </div>

                <div style="text-align: center; margin-top: auto; flex-shrink: 0;">
                    <button id="startGrpcLimitDemo"
                        style="padding: 8px 12px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 6px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.3s; width: 100%;">
                        <i class="fas fa-play"></i> Iniciar Demo
                    </button>
                </div>
            </div>

            <!-- Columna Derecha: Visualización -->
            <div id="grpcLimitDemoContainer" style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                <!-- Demo Dependencias -->
                <div id="demoDependencies" class="grpc-limit-demo-content"
                    style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #f87171; padding: 10px; flex: 1; display: flex; flex-direction: column;">
                        <h3 style="text-align: center; color: #f87171; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-project-diagram"></i> Gráfico de Dependencias
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow: hidden; height: 450px;">
                            <canvas id="dependenciesCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="dependenciesInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #f87171;">
                            Dependencias: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="dependenciesResult"
                            style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para ver las dependencias
                        </div>
                    </div>
                </div>

                <!-- Demo Actualizaciones -->
                <div id="demoUpdates" class="grpc-limit-demo-content"
                    style="display: none; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #fbbf24; padding: 10px; flex: 1; display: flex; flex-direction: column;">
                        <h3 style="text-align: center; color: #fbbf24; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-clock"></i> Timeline de Actualizaciones
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow-y: auto; height: 450px;">
                            <canvas id="updatesCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="updatesInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #fbbf24;">
                            Frecuencia: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="updatesResult"
                            style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para ver el timeline
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 8: JSON -->
    <!-- Slide 8: JSON - Introducción -->
    <div class="slide">
        <h2><i class="fas fa-file-code"></i> JSON: Formato de Serialización Popular</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 0 40px;">
            <!-- Columna Izquierda -->
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <div class="quote" style="font-size: 1rem; padding: 15px; margin: 0;">
                    "API REST pública para partners del Banco de Loja"
                </div>

                <div
                    style="background: rgba(35, 53, 110, 0.3); padding: 20px; border-radius: 12px; border: 2px solid #60a5fa;">
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: #60a5fa;">
                        <i class="fas fa-check-circle"></i> Ventajas
                    </h3>
                    <ul style="font-size: 1rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                        <li><strong>Legible:</strong> Human-readable, fácil de depurar</li>
                        <li><strong>Simple:</strong> Sintaxis intuitiva y directa</li>
                        <li><strong>Universal:</strong> Soporte en todos los lenguajes</li>
                        <li><strong>Compacto:</strong> Más ligero que XML</li>
                        <li><strong>Nativo en Web:</strong> JavaScript nativo</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                    <p style="font-size: 0.95rem; margin: 0; line-height: 1.6;">
                        <i class="fas fa-info-circle"></i> <strong>Caso de Uso:</strong> API pública del Banco de Loja
                        para partners y aplicación móvil
                    </p>
                </div>
            </div>

            <!-- Columna Derecha -->
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <div
                    style="background: rgba(15, 20, 25, 0.6); padding: 20px; border-radius: 12px; border: 2px solid var(--uide-accent);">
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: var(--uide-accent);">
                        <i class="fas fa-exclamation-triangle"></i> Desventajas
                    </h3>
                    <ul style="font-size: 1rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                        <li><strong>Tamaño:</strong> Mayor que formatos binarios</li>
                        <li><strong>Parsing:</strong> Más lento que Protobuf</li>
                        <li><strong>Sin esquema:</strong> Requiere validación externa</li>
                        <li><strong>Tipos limitados:</strong> No soporta fechas nativas</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(74, 222, 128, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #4ade80;">
                    <h3 style="font-size: 1.1rem; margin-bottom: 10px; color: #4ade80;">
                        <i class="fas fa-lightbulb"></i> Cuándo Usar JSON
                    </h3>
                    <ul style="font-size: 0.9rem; line-height: 1.6; margin: 0; padding-left: 20px;">
                        <li>APIs públicas REST</li>
                        <li>Configuración de aplicaciones</li>
                        <li>Intercambio con navegadores</li>
                        <li>Prototipado rápido</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 9: JSON - Schema -->
    <div class="slide">
        <h2><i class="fas fa-file-contract"></i> JSON: Schema de Validación</h2>

        <div style="padding: 0 20px;">
            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">transaccion.schema.json</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 520px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-json">{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Transacción Bancaria",
  "type": "object",
  "required": ["id", "tipo", "monto", "fecha"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^TXN-[0-9]{10}$"
    },
    "tipo": {
      "type": "string",
      "enum": ["transferencia", "pago", "retiro"]
    },
    "origen": {
      "type": "object",
      "properties": {
        "cuenta": { "type": "string", "pattern": "^[0-9]{10}$" },
        "titular": { "type": "string", "minLength": 3 }
      }
    },
    "destino": {
      "type": "object",
      "properties": {
        "cuenta": { "type": "string", "pattern": "^[0-9]{10}$" },
        "titular": { "type": "string" }
      }
    },
    "monto": {
      "type": "number",
      "minimum": 0.01,
      "maximum": 50000
    },
    "fecha": {
      "type": "string",
      "format": "date-time"
    }
  }
}</code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 10: JSON - Validador -->
    <div class="slide">
        <h2><i class="fas fa-check-double"></i> JSON: Validador con AJV</h2>

        <div style="padding: 0 20px;">
            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">validador.js</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 520px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-javascript">import Ajv from 'ajv';
import addFormats from 'ajv-formats';

class ValidadorTransacciones {
  constructor() {
    this.ajv = new Ajv({ allErrors: true });
    addFormats(this.ajv);
    this.validador = null;
  }

  cargarSchema(schema) {
    this.validador = this.ajv.compile(schema);
  }

  validar(transaccion) {
    const valido = this.validador(transaccion);
    
    if (valido) {
      return { valido: true, mensaje: 'Transacción válida' };
    }

    const errores = this.validador.errors.map(e => ({
      campo: e.instancePath,
      mensaje: e.message
    }));

    return { valido: false, errores };
  }
}

// Ejemplo de uso
const validador = new ValidadorTransacciones();
validador.cargarSchema(schema);

// Transacción válida
const txValida = {
  id: 'TXN-1234567890',
  tipo: 'transferencia',
  origen: { cuenta: '1234567890', titular: 'Juan Pérez' },
  destino: { cuenta: '0987654321', titular: 'María García' },
  monto: 150.50,
  fecha: new Date().toISOString()
};

console.log(validador.validar(txValida));
// { valido: true, mensaje: 'Transacción válida' }

// Transacción inválida
const txInvalida = {
  id: 'TXN-123',  // ❌ Patrón incorrecto
  tipo: 'hackeo', // ❌ No está en enum
  monto: -500     // ❌ Monto negativo
};

console.log(validador.validar(txInvalida));
// { valido: false, errores: [...] }</code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 11: JSON - API REST -->
    <div class="slide">
        <h2><i class="fas fa-server"></i> JSON: API REST con Express</h2>

        <div style="padding: 0 20px;">
            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">api-transacciones.js</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 520px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-javascript">import express from 'express';
import { ValidadorTransacciones } from './validador.js';

const app = express();
const validador = new ValidadorTransacciones();

app.use(express.json());

// Endpoint para crear transacción
app.post('/api/transacciones', async (req, res) => {
  try {
    const resultado = validador.validar(req.body);

    if (!resultado.valido) {
      return res.status(400).json({
        error: 'Validación fallida',
        detalles: resultado.errores
      });
    }

    // Procesar transacción
    const transaccion = await procesarTransaccion(req.body);

    res.status(201).json({
      mensaje: 'Transacción procesada',
      id: transaccion.id,
      estado: 'completada'
    });
  } catch (error) {
    res.status(500).json({
      error: 'Error interno',
      mensaje: error.message
    });
  }
});

// Endpoint para validar lote
app.post('/api/transacciones/lote', async (req, res) => {
  const { transacciones } = req.body;

  const resultados = transacciones.map(tx => ({
    id: tx.id,
    valido: validador.validar(tx).valido
  }));

  res.json({
    total: resultados.length,
    validas: resultados.filter(r => r.valido).length,
    resultados
  });
});

app.listen(3000, () => {
  console.log('API escuchando en puerto 3000');
});</code></pre>
                </div>
            </div>
        </div>
    </div>


    <!-- Slide 9a: Protobuf - Definición del Schema -->
    <div class="slide">
        <h2><i class="fas fa-cogs"></i> Protocol Buffers: Definición del Schema</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "Esquema de datos para transacciones bancarias"
            </div>

            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">transaccion.proto</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 450px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-protobuf">syntax = "proto3";

package banco.loja;

message Transaccion {
  string id = 1;
  TipoTransaccion tipo = 2;
  Cuenta origen = 3;
  Cuenta destino = 4;
  double monto = 5;
  string concepto = 6;
  int64 timestamp = 7;
}

message Cuenta {
  string numero = 1;
  string titular = 2;
  string banco = 3;
}

enum TipoTransaccion {
  TRANSFERENCIA = 0;
  RETIRO = 1;
  DEPOSITO = 2;
  PAGO = 3;
}</code></pre>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div style="background: rgba(35, 53, 110, 0.3); padding: 15px; border-radius: 10px; border-left: 4px solid #60a5fa;">
                    <h3 style="font-size: 1rem; margin-bottom: 10px; color: #60a5fa;">
                        <i class="fas fa-check-circle"></i> Ventajas
                    </h3>
                    <ul style="font-size: 0.9rem; line-height: 1.6; margin: 0; padding-left: 20px;">
                        <li>Binario y compacto</li>
                        <li>Alta velocidad</li>
                        <li>Multiplataforma</li>
                    </ul>
                </div>
                <div style="background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                    <p style="font-size: 0.95rem; margin: 0; line-height: 1.6;">
                        <i class="fas fa-info-circle"></i> <strong>Field numbers</strong> (1, 2, 3...) garantizan compatibilidad hacia atrás
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 9b: Protobuf - Uso en Node.js -->
    <div class="slide">
        <h2><i class="fas fa-code"></i> Protocol Buffers: Uso en Node.js</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "Serialización y deserialización de transacciones"
            </div>

            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">transaccion-service.js</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 480px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-javascript">import protobuf from 'protobufjs';

// Cargar el schema
const root = await protobuf.load('transaccion.proto');
const Transaccion = root.lookupType('banco.loja.Transaccion');

// Crear una transacción
const transaccion = {
  id: 'TXN-001',
  tipo: 0, // TRANSFERENCIA
  origen: {
    numero: '1234567890',
    titular: 'Juan Pérez',
    banco: 'Banco de Loja'
  },
  destino: {
    numero: '0987654321',
    titular: 'María García',
    banco: 'Banco Pichincha'
  },
  monto: 1500.50,
  concepto: 'Pago de servicios',
  timestamp: Date.now()
};

// Serializar a binario
const mensaje = Transaccion.create(transaccion);
const buffer = Transaccion.encode(mensaje).finish();

console.log(`Tamaño JSON: ${JSON.stringify(transaccion).length} bytes`);
console.log(`Tamaño Protobuf: ${buffer.length} bytes`);
console.log(`Reducción: ${((1 - buffer.length / JSON.stringify(transaccion).length) * 100).toFixed(1)}%`);

// Deserializar desde binario
const decoded = Transaccion.decode(buffer);
console.log('Transacción deserializada:', decoded);</code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 9c: Protobuf - Evolución del Schema -->
    <div class="slide">
        <h2><i class="fas fa-code-branch"></i> Protocol Buffers: Evolución sin Ruptura</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "Agregar campos sin romper compatibilidad"
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <!-- Versión 1 -->
                <div>
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: #60a5fa;">
                        <i class="fas fa-file-code"></i> Versión 1 (Original)
                    </h3>
                    <div class="code-container" style="overflow: hidden;">
                        <div class="code-header">
                            <span class="code-filename">transaccion-v1.proto</span>
                        </div>
                        <div style="max-height: 350px; overflow-y: auto;">
                            <pre class="line-numbers"><code class="language-protobuf">syntax = "proto3";

message Transaccion {
  string id = 1;
  double monto = 2;
  string concepto = 3;
  int64 timestamp = 4;
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Versión 2 -->
                <div>
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: #4ade80;">
                        <i class="fas fa-file-code"></i> Versión 2 (Extendida)
                    </h3>
                    <div class="code-container" style="overflow: hidden;">
                        <div class="code-header">
                            <span class="code-filename">transaccion-v2.proto</span>
                        </div>
                        <div style="max-height: 350px; overflow-y: auto;">
                            <pre class="line-numbers"><code class="language-protobuf">syntax = "proto3";

message Transaccion {
  string id = 1;
  double monto = 2;
  string concepto = 3;
  int64 timestamp = 4;
  
  // Nuevos campos
  string origen = 5;
  string destino = 6;
  string moneda = 7;
  Estado estado = 8;
}

enum Estado {
  PENDIENTE = 0;
  COMPLETADA = 1;
  RECHAZADA = 2;
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div style="background: rgba(74, 222, 128, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #4ade80; margin-top: 20px;">
                <p style="font-size: 1rem; margin: 0; line-height: 1.6;">
                    <i class="fas fa-check-circle"></i> <strong>Compatibilidad garantizada:</strong> Clientes antiguos ignoran campos nuevos, clientes nuevos usan valores por defecto para campos faltantes
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 10: Protobuf Código -->
    <div class="slide">
        <h2 style="margin-bottom: 0.8rem;"><i class="fas fa-code"></i> Protobuf: Compilador y FieldMask</h2>

        <div
            style="display: grid; grid-template-columns: 40% 60%; gap: 20px; height: calc(100vh - 200px); max-height: 640px;">
            <!-- Columna Izquierda: Características -->
            <div style="display: flex; flex-direction: column; gap: 10px; height: 100%;">
                <div class="quote" style="font-size: 0.8rem; padding: 10px; margin: 0;">
                    "Generación de código para backend Python y sistemas legacy Java"
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Proceso</h3>
                    <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                        <li><strong>Definición</strong>: .proto</li>
                        <li><strong>Compilación</strong>: protoc</li>
                        <li><strong>Generación</strong>: Stubs</li>
                        <li><strong>Integración</strong>: Código</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 8px; border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                    <p style="font-size: 0.75rem; margin: 0;">
                        <i class="fas fa-info-circle"></i> Optimiza respuestas móviles
                    </p>
                </div>

                <!-- Pestañas de Demos -->
                <div style="display: flex; gap: 4px; flex-shrink: 0;">
                    <button class="protoc-tab active" data-demo="compiler"
                        style="flex: 1; padding: 6px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Compilador
                    </button>
                    <button class="protoc-tab" data-demo="fieldmask"
                        style="flex: 1; padding: 6px; background: rgba(255,255,255,0.1); color: #e2e8f0; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        FieldMask
                    </button>
                </div>

                <div style="text-align: center; margin-top: auto; flex-shrink: 0;">
                    <button id="startProtocDemo"
                        style="padding: 8px 12px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 6px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.3s; width: 100%;">
                        <i class="fas fa-play"></i> Iniciar Demo
                    </button>
                </div>
            </div>

            <!-- Columna Derecha: Visualización -->
            <div id="protocDemoContainer" style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                <!-- Demo Compilador -->
                <div id="demoCompiler" class="protoc-demo-content"
                    style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #4ade80; padding: 10px; flex: 1; display: flex; flex-direction: column;">
                        <h3 style="text-align: center; color: #4ade80; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-cogs"></i> Flujo del Compilador protoc
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow: hidden; height: 450px;">
                            <canvas id="compilerFlowCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="compilerFlowInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #4ade80;">
                            Paso: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="compilerFlowResult"
                            style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para ver el flujo de compilación
                        </div>
                    </div>
                </div>

                <!-- Demo FieldMask -->
                <div id="demoFieldmask" class="protoc-demo-content"
                    style="display: none; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #60a5fa; padding: 10px; flex: 1; display: flex; flex-direction: column; min-height: 0;">
                        <h3
                            style="text-align: center; color: #60a5fa; margin: 0 0 8px 0; font-size: 0.9rem; flex-shrink: 0;">
                            <i class="fas fa-filter"></i> FieldMask Interactivo
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow-y: auto; min-height: 0; display: flex; flex-direction: column;">
                            <div style="margin-bottom: 15px; flex-shrink: 0;">
                                <p style="color: #e2e8f0; font-size: 0.85rem; margin-bottom: 10px;">
                                    <strong>Selecciona los campos que deseas recibir:</strong>
                                </p>
                                <div id="fieldMaskCheckboxes"
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 6px;">
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                                        <input type="checkbox" class="field-checkbox" value="id" checked
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>id</span>
                                    </label>
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                                        <input type="checkbox" class="field-checkbox" value="name" checked
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>name</span>
                                    </label>
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                                        <input type="checkbox" class="field-checkbox" value="email"
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>email</span>
                                    </label>
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                                        <input type="checkbox" class="field-checkbox" value="age"
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>age</span>
                                    </label>
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                                        <input type="checkbox" class="field-checkbox" value="roles"
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>roles</span>
                                    </label>
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                                        <input type="checkbox" class="field-checkbox" value="metadata.created"
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>metadata.created</span>
                                    </label>
                                    <label
                                        style="color: #ffffff; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px; grid-column: span 2;">
                                        <input type="checkbox" class="field-checkbox" value="metadata.lastLogin"
                                            style="width: 14px; height: 14px; cursor: pointer;">
                                        <span>metadata.lastLogin</span>
                                    </label>
                                </div>
                            </div>
                            <div style="flex: 1; min-height: 0; position: relative;">
                                <canvas id="fieldMaskCanvas" style="display: block; width: 100%;"></canvas>
                            </div>
                        </div>
                        <div id="fieldMaskInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #60a5fa; flex-shrink: 0;">
                            Campos seleccionados: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="fieldMaskResult"
                            style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para aplicar FieldMask
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 10.5: Práctica - Servicio Eco JSON vs Protobuf -->
    <div class="slide">
        <h2 style="margin-bottom: 0.8rem;"><i class="fas fa-flask"></i> Práctica: Servicio Eco - JSON vs Protobuf
        </h2>

        <div
            style="display: grid; grid-template-columns: 40% 60%; gap: 20px; height: calc(100vh - 200px); max-height: 640px;">
            <!-- Columna Izquierda: Objetivo y Proceso -->
            <div style="display: flex; flex-direction: column; gap: 10px; height: 100%;">
                <div class="quote" style="font-size: 0.8rem; padding: 10px; margin: 0;">
                    "Implementar un servicio de eco que responde en JSON y Protobuf para comparar tamaños"
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Objetivo</h3>
                    <p style="font-size: 0.8rem; line-height: 1.4; margin: 0;">
                        Crear un servidor Express con dos endpoints que reciban un mensaje y lo devuelvan junto con un
                        timestamp, comparando el tamaño de las respuestas.
                    </p>
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Endpoints</h3>
                    <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                        <li><strong>POST /echo/json</strong>: Responde en JSON</li>
                        <li><strong>POST /echo/protobuf</strong>: Responde en Protobuf</li>
                    </ul>
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Proceso</h3>
                    <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                        <li>1. Definir esquema <code>.proto</code></li>
                        <li>2. Crear servidor Express</li>
                        <li>3. Implementar endpoints</li>
                        <li>4. Ejecutar pruebas con <code>npm test</code></li>
                        <li>5. Analizar resultados</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 8px; border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                    <p style="font-size: 0.75rem; margin: 0;">
                        <i class="fas fa-info-circle"></i> Protobuf reduce el tamaño ~47%
                    </p>
                </div>
            </div>

            <!-- Columna Derecha: Código de Ejemplo -->
            <div style="display: flex; flex-direction: column; gap: 12px; height: 100%; overflow-y: auto;">
                <!-- Esquema .proto -->
                <div
                    style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #a78bfa; padding: 10px; flex-shrink: 0;">
                    <h3 style="text-align: center; color: #a78bfa; margin: 0 0 8px 0; font-size: 0.9rem;">
                        <i class="fas fa-file-code"></i> echo.proto
                    </h3>
                    <pre style="margin: 0; font-size: 0.75rem; line-height: 1.4;"><code class="language-protobuf">syntax = "proto3";

package echo;

message EchoRequest {
  string message = 1;
}

message EchoResponse {
  string message = 1;
  int64 timestamp = 2;
}</code></pre>
                </div>

                <!-- Endpoint JSON -->
                <div
                    style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #60a5fa; padding: 10px; flex-shrink: 0;">
                    <h3 style="text-align: center; color: #60a5fa; margin: 0 0 8px 0; font-size: 0.9rem;">
                        <i class="fas fa-code"></i> Endpoint JSON
                    </h3>
                    <pre style="margin: 0; font-size: 0.7rem; line-height: 1.4;"><code class="language-javascript">app.post('/echo/json', (req, res) => {
  const { message } = req.body;

  const response = {
    message: message,
    timestamp: Date.now()
  };

  const size = JSON.stringify(response).length;
  res.set('X-Response-Size', size);
  res.json(response);
});</code></pre>
                </div>

                <!-- Endpoint Protobuf -->
                <div
                    style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #4ade80; padding: 10px; flex-shrink: 0;">
                    <h3 style="text-align: center; color: #4ade80; margin: 0 0 8px 0; font-size: 0.9rem;">
                        <i class="fas fa-code"></i> Endpoint Protobuf
                    </h3>
                    <pre style="margin: 0; font-size: 0.7rem; line-height: 1.4;"><code class="language-javascript">app.post('/echo/protobuf', (req, res) => {
  const requestMessage = EchoRequest.decode(req.body);

  const responsePayload = {
    message: requestMessage.message,
    timestamp: Date.now()
  };

  const responseMessage = EchoResponse.create(responsePayload);
  const buffer = EchoResponse.encode(responseMessage).finish();

  res.set('X-Response-Size', buffer.length);
  res.send(buffer);
});</code></pre>
                </div>

                <!-- Resultados Esperados -->
                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 10px; border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                    <h3 style="font-size: 0.9rem; margin: 0 0 6px 0; color: var(--uide-accent);">
                        <i class="fas fa-chart-bar"></i> Resultados Esperados
                    </h3>
                    <div style="font-size: 0.75rem; line-height: 1.5;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span><strong>JSON:</strong></span>
                            <span style="color: #60a5fa;">~66 bytes</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span><strong>Protobuf:</strong></span>
                            <span style="color: #4ade80;">~35 bytes</span>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; padding-top: 6px; border-top: 1px solid rgba(255,255,255,0.2);">
                            <span><strong>Reducción:</strong></span>
                            <span style="color: var(--uide-accent); font-weight: 600;">46.97%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 11: MessagePack -->
    <div class="slide">
        <h2 style="margin-bottom: 0.8rem;"><i class="fas fa-box"></i> MessagePack: El Punto Medio</h2>

        <div
            style="display: grid; grid-template-columns: 40% 60%; gap: 20px; height: calc(100vh - 200px); max-height: 640px;">
            <!-- Columna Izquierda: Características -->
            <div style="display: flex; flex-direction: column; gap: 10px; height: 100%;">
                <div class="quote" style="font-size: 0.8rem; padding: 10px; margin: 0;">
                    "Cache de sesiones en Redis para autenticación rápida"
                </div>

                <div style="flex-shrink: 0;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 6px;">Posicionamiento</h3>
                    <ul style="font-size: 0.8rem; line-height: 1.4; margin: 0; padding-left: 18px;">
                        <li><strong>Binario</strong>: Más eficiente que JSON</li>
                        <li><strong>Simple</strong>: Más fácil que Protobuf</li>
                        <li><strong>Sin esquema</strong>: No requiere .proto</li>
                        <li><strong>Multiplataforma</strong>: Amplio soporte</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 8px; border-radius: 8px; border-left: 4px solid var(--uide-accent); flex-shrink: 0;">
                    <p style="font-size: 0.75rem; margin: 0;">
                        <i class="fas fa-info-circle"></i> Cache Redis y colas de mensajes
                    </p>
                </div>

                <!-- Pestañas de Demos -->
                <div style="display: flex; gap: 4px; flex-shrink: 0;">
                    <button class="msgpack-tab active" data-demo="radar"
                        style="flex: 1; padding: 6px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Comparación
                    </button>
                    <button class="msgpack-tab" data-demo="usecases"
                        style="flex: 1; padding: 6px; background: rgba(255,255,255,0.1); color: #e2e8f0; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer; font-weight: 600;">
                        Casos de Uso
                    </button>
                </div>

                <div style="text-align: center; margin-top: auto; flex-shrink: 0;">
                    <button id="startMsgPackDemo"
                        style="padding: 8px 12px; background: var(--uide-accent); color: #0f1419; border: none; border-radius: 6px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.3s; width: 100%;">
                        <i class="fas fa-play"></i> Iniciar Demo
                    </button>
                </div>
            </div>

            <!-- Columna Derecha: Visualización -->
            <div id="msgpackDemoContainer" style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                <!-- Demo Radar -->
                <div id="demoRadar" class="msgpack-demo-content"
                    style="display: flex; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #fbbf24; padding: 10px; flex: 1; display: flex; flex-direction: column;">
                        <h3 style="text-align: center; color: #fbbf24; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-chart-radar"></i> Gráfico de Radar Comparativo
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow: hidden; height: 300px;">
                            <canvas id="radarCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="radarInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #fbbf24;">
                            Tecnologías: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="radarResult" style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Comparación de rendimiento HTTP/1.1 vs HTTP/2
                        </div>
                    </div>
                </div>

                <!-- Demo Casos de Uso -->
                <div id="demoUsecases" class="msgpack-demo-content"
                    style="display: none; flex-direction: column; gap: 12px; height: 100%;">
                    <div
                        style="background: rgba(15, 20, 25, 0.6); border-radius: 8px; border: 2px solid #4ade80; padding: 10px; flex: 1; display: flex; flex-direction: column;">
                        <h3 style="text-align: center; color: #4ade80; margin: 0 0 8px 0; font-size: 0.9rem;">
                            <i class="fas fa-sitemap"></i> Casos de Uso por Tecnología
                        </h3>
                        <div
                            style="flex: 1; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 12px; overflow-y: auto; height: 450px;">
                            <canvas id="usecasesCanvas" style="display: block;"></canvas>
                        </div>
                        <div id="usecasesInfo"
                            style="text-align: center; margin-top: 6px; font-size: 0.75rem; font-weight: 600; color: #4ade80;">
                            Casos de uso: -</div>
                    </div>

                    <div
                        style="text-align: center; padding: 8px; background: rgba(233, 171, 33, 0.1); border-radius: 6px; flex-shrink: 0;">
                        <div id="usecasesResult"
                            style="font-size: 0.85rem; font-weight: 600; color: var(--uide-accent);">
                            Presiona "Iniciar Demo" para ver los casos de uso
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 12a: XML - Ejemplo Básico -->
    <div class="slide">
        <h2><i class="fas fa-code"></i> XML: Estructura Básica</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 0 40px;">
            <!-- Columna Izquierda -->
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <div class="quote" style="font-size: 1rem; padding: 15px; margin: 0;">
                    "Integración con SRI para facturas electrónicas"
                </div>

                <div
                    style="background: rgba(248, 113, 113, 0.1); padding: 20px; border-radius: 12px; border: 2px solid #f87171;">
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: #f87171;">
                        <i class="fas fa-exclamation-triangle"></i> Desventajas
                    </h3>
                    <ul style="font-size: 1rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                        <li><strong>Verbosidad:</strong> Tags de apertura y cierre</li>
                        <li><strong>Overhead:</strong> 2-3x más grande que JSON</li>
                        <li><strong>Parsing:</strong> Más lento y costoso</li>
                        <li><strong>Complejidad:</strong> Namespaces y atributos</li>
                    </ul>
                </div>

                <div
                    style="background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                    <p style="font-size: 0.95rem; margin: 0; line-height: 1.6;">
                        <i class="fas fa-info-circle"></i> <strong>Uso actual:</strong> Sistemas legacy, integraciones
                        gubernamentales (SRI, BCE, IESS)
                    </p>
                </div>
            </div>

            <!-- Columna Derecha -->
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <div class="code-container" style="overflow: hidden;">
                    <div class="code-header">
                        <span class="code-filename">transaccion.xml</span>
                        <button class="code-copy-btn" onclick="copyCode(this)">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                    <div style="max-height: 450px; overflow-y: auto;">
                        <pre class="line-numbers"><code class="language-xml"><?xml version="1.0" encoding="UTF-8"?>
<transaccion tipo="transferencia" banco="Loja">
  <id>TXN-1234567890</id>
  <fecha>2025-11-12T10:30:00Z</fecha>
  <origen>
    <cuenta>1234567890</cuenta>
    <titular>Juan Pérez</titular>
    <banco>Banco de Loja</banco>
  </origen>
  <destino>
    <cuenta>0987654321</cuenta>
    <titular>María García</titular>
    <banco>Banco Pichincha</banco>
  </destino>
  <monto moneda="USD">1500.50</monto>
  <concepto>Pago de servicios</concepto>
  <estado>completada</estado>
  <metadata>
    <ip>192.168.1.100</ip>
    <dispositivo>Web</dispositivo>
  </metadata>
</transaccion></code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 12b: XML vs JSON - Comparación -->
    <div class="slide">
        <h2><i class="fas fa-balance-scale"></i> XML vs JSON: Comparación de Tamaño</h2>

        <div style="padding: 0 40px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 20px;">
                <!-- JSON -->
                <div class="code-container" style="overflow: hidden;">
                    <div class="code-header">
                        <span class="code-filename">transaccion.json</span>
                        <span class="code-language">~180 bytes</span>
                    </div>
                    <div style="max-height: 450px; overflow-y: auto;">
                        <pre class="line-numbers"><code class="language-json">{
  "id": "TXN-1234567890",
  "tipo": "transferencia",
  "fecha": "2025-11-12T10:30:00Z",
  "origen": {
    "cuenta": "1234567890",
    "titular": "Juan Pérez"
  },
  "destino": {
    "cuenta": "0987654321",
    "titular": "María García"
  },
  "monto": 1500.50,
  "concepto": "Pago de servicios"
}</code></pre>
                    </div>
                </div>

                <!-- XML -->
                <div class="code-container" style="overflow: hidden;">
                    <div class="code-header">
                        <span class="code-filename">transaccion.xml</span>
                        <span class="code-language">~420 bytes</span>
                    </div>
                    <div style="max-height: 450px; overflow-y: auto;">
                        <pre class="line-numbers"><code class="language-xml"><?xml version="1.0" encoding="UTF-8"?>
<transaccion tipo="transferencia">
  <id>TXN-1234567890</id>
  <fecha>2025-11-12T10:30:00Z</fecha>
  <origen>
    <cuenta>1234567890</cuenta>
    <titular>Juan Pérez</titular>
  </origen>
  <destino>
    <cuenta>0987654321</cuenta>
    <titular>María García</titular>
  </destino>
  <monto>1500.50</monto>
  <concepto>Pago de servicios</concepto>
</transaccion></code></pre>
                    </div>
                </div>
            </div>

            <div
                style="background: rgba(233, 171, 33, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid var(--uide-accent); text-align: center;">
                <p style="font-size: 1.2rem; margin: 0; color: var(--uide-accent); font-weight: 600;">
                    <i class="fas fa-chart-bar"></i> XML es <strong>2.3x más grande</strong> que JSON para los mismos
                    datos
                </p>
                <p style="font-size: 0.95rem; margin-top: 10px; color: #cbd5e1;">
                    El overhead proviene de tags de apertura/cierre, declaración XML y atributos
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 13a: XML - Documento de Ejemplo -->
    <div class="slide">
        <h2><i class="fas fa-file-code"></i> XML: Documento de Transacciones</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "Documento XML con múltiples transacciones del Banco de Loja"
            </div>

            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">transacciones.xml</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 500px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;transacciones&gt;
  &lt;transaccion tipo="transferencia" banco="Pichincha"&gt;
    &lt;id&gt;TXN-001&lt;/id&gt;
    &lt;fecha&gt;2025-11-10T09:15:00Z&lt;/fecha&gt;
    &lt;cliente&gt;
      &lt;nombre&gt;Juan Pérez&lt;/nombre&gt;
      &lt;cuenta&gt;1234567890&lt;/cuenta&gt;
    &lt;/cliente&gt;
    &lt;monto&gt;1500.00&lt;/monto&gt;
    &lt;concepto&gt;Pago de servicios&lt;/concepto&gt;
  &lt;/transaccion&gt;

  &lt;transaccion tipo="retiro" banco="Loja"&gt;
    &lt;id&gt;TXN-002&lt;/id&gt;
    &lt;fecha&gt;2025-11-11T14:30:00Z&lt;/fecha&gt;
    &lt;cliente&gt;
      &lt;nombre&gt;María García&lt;/nombre&gt;
      &lt;cuenta&gt;0987654321&lt;/cuenta&gt;
    &lt;/cliente&gt;
    &lt;monto&gt;500.00&lt;/monto&gt;
    &lt;concepto&gt;Retiro ATM&lt;/concepto&gt;
  &lt;/transaccion&gt;

  &lt;transaccion tipo="transferencia" banco="Guayaquil"&gt;
    &lt;id&gt;TXN-003&lt;/id&gt;
    &lt;fecha&gt;2025-11-12T10:45:00Z&lt;/fecha&gt;
    &lt;cliente&gt;
      &lt;nombre&gt;Carlos López&lt;/nombre&gt;
      &lt;cuenta&gt;5555555555&lt;/cuenta&gt;
    &lt;/cliente&gt;
    &lt;monto&gt;2500.00&lt;/monto&gt;
    &lt;concepto&gt;Transferencia internacional&lt;/concepto&gt;
  &lt;/transaccion&gt;

  &lt;transaccion tipo="pago" banco="Pichincha"&gt;
    &lt;id&gt;TXN-004&lt;/id&gt;
    &lt;fecha&gt;2025-11-12T16:20:00Z&lt;/fecha&gt;
    &lt;cliente&gt;
      &lt;nombre&gt;Ana Martínez&lt;/nombre&gt;
      &lt;cuenta&gt;7777777777&lt;/cuenta&gt;
    &lt;/cliente&gt;
    &lt;monto&gt;800.00&lt;/monto&gt;
    &lt;concepto&gt;Pago de tarjeta&lt;/concepto&gt;
  &lt;/transaccion&gt;
&lt;/transacciones&gt;</code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 13b: XML - XPath Consultas -->
    <div class="slide">
        <h2><i class="fas fa-search"></i> XML: Consultas con XPath</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "XPath permite consultas precisas sobre documentos XML"
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <!-- Columna Izquierda: Consultas Básicas -->
                <div>
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: #60a5fa;">
                        <i class="fas fa-code"></i> Consultas Básicas
                    </h3>
                    <div class="code-container" style="overflow: hidden; margin-bottom: 20px;">
                        <div class="code-header">
                            <span class="code-filename">xpath-basico.js</span>
                        </div>
                        <div style="max-height: 250px; overflow-y: auto;">
                            <pre class="line-numbers"><code class="language-javascript">// Todas las transacciones
//transaccion

// Solo transferencias
//transaccion[@tipo='transferencia']

// Transacciones al Banco Pichincha
//transaccion[@banco='Pichincha']

// Montos mayores a $1000
//transaccion[monto > 1000]

// Todas las fechas
//transaccion/fecha

// Nombres de clientes
//cliente/nombre</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Columna Derecha: Consultas Avanzadas -->
                <div>
                    <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: var(--uide-accent);">
                        <i class="fas fa-code-branch"></i> Consultas Avanzadas
                    </h3>
                    <div class="code-container" style="overflow: hidden; margin-bottom: 20px;">
                        <div class="code-header">
                            <span class="code-filename">xpath-avanzado.js</span>
                        </div>
                        <div style="max-height: 250px; overflow-y: auto;">
                            <pre class="line-numbers"><code class="language-javascript">// Primera transacción
//transaccion[1]

// Última transacción
//transaccion[last()]

// Transacciones con monto entre 500 y 2000
//transaccion[monto >= 500 and monto <= 2000]

// Clientes con cuenta que empieza con '12'
//cliente[starts-with(cuenta, '12')]

// Contar transacciones
count(//transaccion)

// Suma de todos los montos
sum(//transaccion/monto)</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div style="background: rgba(233, 171, 33, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid var(--uide-accent); margin-top: 20px;">
                <p style="font-size: 1rem; margin: 0; line-height: 1.6;">
                    <i class="fas fa-info-circle"></i> <strong>XPath</strong> es esencial para auditoría y reportes en sistemas que usan XML (SRI, BCE, IESS)
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 14a: XML - SOAP Request -->
    <div class="slide">
        <h2><i class="fas fa-building"></i> XML: SOAP Request al IESS</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "Consulta de aportes al IESS mediante SOAP"
            </div>

            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">soap-request.xml</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 500px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;soap:Envelope 
  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:iess="http://www.iess.gob.ec/servicios"&gt;
  
  &lt;soap:Header&gt;
    &lt;iess:Autenticacion&gt;
      &lt;usuario&gt;BANCO_LOJA&lt;/usuario&gt;
      &lt;token&gt;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&lt;/token&gt;
    &lt;/iess:Autenticacion&gt;
  &lt;/soap:Header&gt;
  
  &lt;soap:Body&gt;
    &lt;iess:ConsultarAportes&gt;
      &lt;cedula&gt;1234567890&lt;/cedula&gt;
      &lt;fechaInicio&gt;2024-01-01&lt;/fechaInicio&gt;
      &lt;fechaFin&gt;2025-11-12&lt;/fechaFin&gt;
      &lt;tipoConsulta&gt;DETALLADO&lt;/tipoConsulta&gt;
    &lt;/iess:ConsultarAportes&gt;
  &lt;/soap:Body&gt;
  
&lt;/soap:Envelope&gt;</code></pre>
                </div>
            </div>

            <div style="background: rgba(248, 113, 113, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #f87171; margin-top: 20px;">
                <p style="font-size: 0.95rem; margin: 0; line-height: 1.6;">
                    <i class="fas fa-exclamation-triangle"></i> <strong>SOAP</strong> es legacy pero obligatorio para integraciones con entidades gubernamentales (IESS, BCE, SRI)
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 14b: XML - SOAP Response -->
    <div class="slide">
        <h2><i class="fas fa-reply"></i> XML: SOAP Response del IESS</h2>

        <div style="padding: 0 40px;">
            <div class="quote" style="font-size: 1rem; padding: 15px; margin-bottom: 20px;">
                "Respuesta con historial de aportes"
            </div>

            <div class="code-container" style="overflow: hidden;">
                <div class="code-header">
                    <span class="code-filename">soap-response.xml</span>
                    <button class="code-copy-btn" onclick="copyCode(this)">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <div style="max-height: 500px; overflow-y: auto;">
                    <pre class="line-numbers"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;soap:Envelope 
  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:iess="http://www.iess.gob.ec/servicios"&gt;
  
  &lt;soap:Body&gt;
    &lt;iess:ConsultarAportesResponse&gt;
      &lt;resultado&gt;
        &lt;codigo&gt;200&lt;/codigo&gt;
        &lt;mensaje&gt;Consulta exitosa&lt;/mensaje&gt;
      &lt;/resultado&gt;
      
      &lt;afiliado&gt;
        &lt;cedula&gt;1234567890&lt;/cedula&gt;
        &lt;nombres&gt;Juan Pérez&lt;/nombres&gt;
        &lt;estado&gt;ACTIVO&lt;/estado&gt;
      &lt;/afiliado&gt;
      
      &lt;aportes&gt;
        &lt;aporte&gt;
          &lt;periodo&gt;2025-10&lt;/periodo&gt;
          &lt;empleador&gt;Banco de Loja&lt;/empleador&gt;
          &lt;sueldo&gt;1500.00&lt;/sueldo&gt;
          &lt;aportado&gt;285.00&lt;/aportado&gt;
          &lt;estado&gt;PAGADO&lt;/estado&gt;
        &lt;/aporte&gt;
        &lt;aporte&gt;
          &lt;periodo&gt;2025-09&lt;/periodo&gt;
          &lt;empleador&gt;Banco de Loja&lt;/empleador&gt;
          &lt;sueldo&gt;1500.00&lt;/sueldo&gt;
          &lt;aportado&gt;285.00&lt;/aportado&gt;
          &lt;estado&gt;PAGADO&lt;/estado&gt;
        &lt;/aporte&gt;
      &lt;/aportes&gt;
      
      &lt;resumen&gt;
        &lt;totalAportes&gt;24&lt;/totalAportes&gt;
        &lt;ultimoPeriodo&gt;2025-10&lt;/ultimoPeriodo&gt;
      &lt;/resumen&gt;
    &lt;/iess:ConsultarAportesResponse&gt;
  &lt;/soap:Body&gt;
  
&lt;/soap:Envelope&gt;</code></pre>
                </div>
            </div>

            <div style="background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent); margin-top: 20px;">
                <p style="font-size: 0.95rem; margin: 0; line-height: 1.6;">
                    <i class="fas fa-info-circle"></i> <strong>Casos de uso:</strong> BCE (tasas), IESS (aportes), SRI (facturas), Superintendencia (reportes)
                </p>
            </div>
        </div>
    </div>

    <!-- Slide 15: Comparación -->
    <div class="slide">
        <h2><i class="fas fa-balance-scale"></i> Comparación de Tecnologías</h2>
        <table>
            <thead>
                <tr>
                    <th>Tecnología</th>
                    <th>Velocidad</th>
                    <th>Tamaño</th>
                    <th>Complejidad</th>
                    <th>Interoperabilidad</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>gRPC/Protobuf</strong></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                </tr>
                <tr>
                    <td><strong>HTTP/2</strong></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i></td>
                </tr>
                <tr>
                    <td><strong>WebSockets</strong></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                </tr>
                <tr>
                    <td><strong>JSON</strong></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i></td>
                </tr>
                <tr>
                    <td><strong>XML</strong></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i></td>
                    <td><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Slide 16: Criterios de Selección y Casos de Uso -->
    <div class="slide">
        <h2><i class="fas fa-check-circle"></i> Criterios de Selección: Casos de Uso</h2>
        <div class="content-grid">
            <div class="feature-card">
                <h3><i class="fas fa-server"></i> Microservicios</h3>
                <p><strong>gRPC + Protobuf</strong></p>
                <p>Máximo rendimiento y baja latencia</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-globe"></i> APIs Públicas</h3>
                <p><strong>JSON + HTTP/REST</strong></p>
                <p>Simplicidad y adopción universal</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-clock"></i> Tiempo Real</h3>
                <p><strong>WebSockets</strong></p>
                <p>Conexión bidireccional persistente</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-building"></i> Enterprise</h3>
                <p><strong>XML + SOAP</strong></p>
                <p>Estándares establecidos</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-cogs"></i> Evolución Rápida</h3>
                <p><strong>Protobuf</strong></p>
                <p>Versionado sin ruptura</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-balance-scale"></i> Balance</h3>
                <p><strong>MessagePack</strong></p>
                <p>Eficiente y simple</p>
            </div>
        </div>
    </div>

    <!-- Slide 18: Actividades -->
    <!-- Slide: Actividades y Herramientas -->
    <div class="slide">
        <h2><i class="fas fa-clipboard-list"></i> Actividades Calificadas y Herramientas</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 0 40px;">
            <!-- Columna Izquierda: Actividades Calificadas -->
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <div style="padding: 20px; background: rgba(15, 20, 25, 0.6); border-radius: 12px; border: 2px solid var(--uide-primary);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="color: var(--uide-primary); font-size: 1.3rem; margin: 0;">
                            <i class="fas fa-clipboard-check"></i> Actividades Calificadas
                        </h3>
                        <button onclick="copyActivitiesPMSBD()" class="teacher-copy-btn-pmsbd" style="display: none; background: rgba(96, 165, 250, 0.2); border: 1px solid #60a5fa; color: #60a5fa; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;" onmouseover="this.style.background='rgba(96, 165, 250, 0.3)'" onmouseout="this.style.background='rgba(96, 165, 250, 0.2)'">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <!-- GA-1.1 -->
                        <div style="background: rgba(96, 165, 250, 0.15); padding: 15px; border-radius: 10px; border-left: 4px solid #60a5fa;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <span style="color: #e2e8f0; font-size: 1rem; font-weight: 600;">
                                    <i class="fas fa-poll"></i> GA-1.1: Sondeo de protocolos
                                </span>
                                <span style="color: var(--uide-accent); font-size: 1rem; font-weight: 700;">1 pt</span>
                            </div>
                            <p style="color: #cbd5e1; font-size: 0.85rem; margin: 0; line-height: 1.4;">
                                ¿Cuándo usar HTTP/2, WebSockets, gRPC?
                            </p>
                        </div>

                        <!-- PE-1.3 -->
                        <div style="background: rgba(74, 222, 128, 0.15); padding: 15px; border-radius: 10px; border-left: 4px solid #4ade80;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <span style="color: #e2e8f0; font-size: 1rem; font-weight: 600;">
                                    <i class="fas fa-flask"></i> PE-1.3: Lab eco-service
                                </span>
                                <span style="color: var(--uide-accent); font-size: 1rem; font-weight: 700;">2.25 pts</span>
                            </div>
                            <p style="color: #cbd5e1; font-size: 0.85rem; margin: 0; line-height: 1.4;">
                                Servicio Node.js con JSON y Protobuf
                            </p>
                        </div>

                        <!-- TA-1.3 -->
                        <div style="background: rgba(233, 171, 33, 0.15); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <span style="color: #e2e8f0; font-size: 1rem; font-weight: 600;">
                                    <i class="fas fa-file-code"></i> TA-1.3: Postman collection
                                </span>
                                <span style="color: var(--uide-accent); font-size: 1rem; font-weight: 700;">2.25 pts</span>
                            </div>
                            <p style="color: #cbd5e1; font-size: 0.85rem; margin: 0; line-height: 1.4;">
                                Collection + script de cliente
                            </p>
                        </div>

                        <!-- Total -->
                        <div style="background: rgba(233, 171, 33, 0.2); padding: 15px; border-radius: 10px; border: 2px solid var(--uide-accent); margin-top: 5px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: var(--uide-accent); font-size: 1.1rem; font-weight: 700;">
                                    <i class="fas fa-star"></i> Total Semana 3
                                </span>
                                <span style="color: var(--uide-accent); font-size: 1.3rem; font-weight: 700;">5.5 pts</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Columna Derecha: Herramientas -->
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <div style="padding: 20px; background: rgba(35, 53, 110, 0.3); border-radius: 12px; border: 2px solid #60a5fa;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="color: #60a5fa; font-size: 1.3rem; margin: 0;">
                            <i class="fas fa-tools"></i> Herramientas
                        </h3>
                        <button onclick="copyToolsPMSBD()" class="teacher-copy-btn-pmsbd" style="display: none; background: rgba(74, 222, 128, 0.2); border: 1px solid #4ade80; color: #4ade80; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;" onmouseover="this.style.background='rgba(74, 222, 128, 0.3)'" onmouseout="this.style.background='rgba(74, 222, 128, 0.2)'">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                            <i class="fas fa-code" style="color: #4ade80; margin-right: 8px;"></i>
                            <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Node.js + Express</span>
                        </div>
                        <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                            <i class="fas fa-cube" style="color: #4ade80; margin-right: 8px;"></i>
                            <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Protocol Buffers (Protobuf)</span>
                        </div>
                        <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                            <i class="fas fa-rocket" style="color: #4ade80; margin-right: 8px;"></i>
                            <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Postman (testing de APIs)</span>
                        </div>
                        <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                            <i class="fas fa-network-wired" style="color: #4ade80; margin-right: 8px;"></i>
                            <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">gRPC framework</span>
                        </div>
                        <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                            <i class="fas fa-bolt" style="color: #4ade80; margin-right: 8px;"></i>
                            <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">WebSockets</span>
                        </div>
                        <div style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid #4ade80;">
                            <i class="fas fa-book" style="color: #4ade80; margin-right: 8px;"></i>
                            <span style="color: #e2e8f0; font-size: 0.95rem; font-weight: 500;">Documentación técnica</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--uide-accent);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <p style="margin: 0; font-size: 0.9rem; color: #e2e8f0; font-weight: 600;">
                            <i class="fas fa-graduation-cap"></i> Unidad 2: Protocolos y Seguridad
                        </p>
                        <button onclick="copyUnitTitlePMSBD()" class="teacher-copy-btn-pmsbd" style="display: none; background: rgba(233, 171, 33, 0.2); border: 1px solid var(--uide-accent); color: var(--uide-accent); padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;" onmouseover="this.style.background='rgba(233, 171, 33, 0.3)'" onmouseout="this.style.background='rgba(233, 171, 33, 0.2)'">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                    <p style="margin: 0; font-size: 0.85rem; color: #cbd5e1; line-height: 1.5;">
                        HTTP/2, WebSockets, gRPC • JSON, Protobuf, MessagePack • XML básico y rol enterprise
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variable para controlar si los botones están visibles
        let teacherModeActivePMSBD = false;

        // Detectar combinación de teclas Ctrl+Shift+C
        document.addEventListener('keydown', function (e) {
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'C') {
                e.preventDefault();
                teacherModeActivePMSBD = !teacherModeActivePMSBD;
                toggleTeacherButtonsPMSBD();

                if (teacherModeActivePMSBD) {
                    showCopyNotificationPMSBD('🎓 Modo Docente Activado - Botones de copiar visibles');
                } else {
                    showCopyNotificationPMSBD('👁️ Modo Docente Desactivado - Botones ocultos');
                }
            }
        });

        function toggleTeacherButtonsPMSBD() {
            const buttons = document.querySelectorAll('.teacher-copy-btn-pmsbd');
            buttons.forEach(button => {
                if (teacherModeActivePMSBD) {
                    button.style.display = 'block';
                    button.style.animation = 'fadeIn 0.3s ease-in';
                } else {
                    button.style.display = 'none';
                }
            });
        }

        function copyActivitiesPMSBD() {
            const text = `ACTIVIDADES CALIFICADAS - SEMANA 3

GA-1.1: Sondeo de protocolos (1 pt)
¿Cuándo usar HTTP/2, WebSockets, gRPC?

PE-1.3: Lab eco-service (2.25 pts)
Servicio Node.js con JSON y Protobuf

TA-1.3: Postman collection (2.25 pts)
Collection + script de cliente

TOTAL: 5.5 puntos`;

            navigator.clipboard.writeText(text).then(() => {
                showCopyNotificationPMSBD('Actividades copiadas al portapapeles');
            }).catch(err => {
                console.error('Error al copiar:', err);
            });
        }

        function copyToolsPMSBD() {
            const text = `HERRAMIENTAS DE APRENDIZAJE - SEMANA 3

• Node.js + Express
• Protocol Buffers (Protobuf)
• Postman (testing de APIs)
• gRPC framework
• WebSockets
• Documentación técnica`;

            navigator.clipboard.writeText(text).then(() => {
                showCopyNotificationPMSBD('Herramientas copiadas al portapapeles');
            }).catch(err => {
                console.error('Error al copiar:', err);
            });
        }

        function copyUnitTitlePMSBD() {
            const text = `Semana 3 • HTTP/2, WebSockets, gRPC • JSON, Protobuf, MessagePack • XML básico y rol enterprise`;

            navigator.clipboard.writeText(text).then(() => {
                showCopyNotificationPMSBD('Contenido de la semana copiado al portapapeles');
            }).catch(err => {
                console.error('Error al copiar:', err);
            });
        }

        function showCopyNotificationPMSBD(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(74, 222, 128, 0.95);
                color: #0f1419;
                padding: 15px 25px;
                border-radius: 8px;
                font-size: 0.9rem;
                font-weight: 600;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideInPMSBD 0.3s ease-out;
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutPMSBD 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 2000);
        }

        // Agregar estilos de animación
        const stylePMSBD = document.createElement('style');
        stylePMSBD.textContent = `
            @keyframes slideInPMSBD {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOutPMSBD {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }
            
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: scale(0.9);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }
        `;
        document.head.appendChild(stylePMSBD);
    </script>

    <!-- Slide 19: Síntesis y Reflexiones -->
    <div class="slide title-slide">
        <h1><i class="fas fa-lightbulb"></i> Arquitectura Banco de Loja: Síntesis</h1>
        <div class="quote">
            "Sistema bancario moderno con integración legacy - Un caso real ecuatoriano"
        </div>

        <div
            style="margin-top: 1.5rem; background: rgba(15, 20, 25, 0.6); border-radius: 12px; padding: 20px; border: 2px solid var(--uide-accent);">
            <h3 style="color: var(--uide-accent); margin-bottom: 1rem; text-align: center;">
                <i class="fas fa-sitemap"></i> Stack Tecnológico Completo
            </h3>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 1.5rem;">
                <div
                    style="background: rgba(96, 165, 250, 0.1); padding: 12px; border-radius: 8px; border-left: 4px solid #60a5fa;">
                    <h4 style="color: #60a5fa; margin-bottom: 8px; font-size: 0.95rem;">▯ Capa de Presentación
                    </h4>
                    <p style="font-size: 0.85rem; margin: 0;">
                        <strong>HTTP/2 + JSON</strong><br>
                        App móvil con multiplexación<br>
                        <span style="color: #94a3b8;">Dashboard, transacciones, notificaciones</span>
                    </p>
                </div>

                <div
                    style="background: rgba(74, 222, 128, 0.1); padding: 12px; border-radius: 8px; border-left: 4px solid #4ade80;">
                    <h4 style="color: #4ade80; margin-bottom: 8px; font-size: 0.95rem;">⚡ Tiempo Real</h4>
                    <p style="font-size: 0.85rem; margin: 0;">
                        <strong>WebSockets</strong><br>
                        Notificaciones y soporte en vivo<br>
                        <span style="color: #94a3b8;">Alertas de transacciones, chat</span>
                    </p>
                </div>

                <div
                    style="background: rgba(34, 197, 94, 0.1); padding: 12px; border-radius: 8px; border-left: 4px solid #22c55e;">
                    <h4 style="color: #22c55e; margin-bottom: 8px; font-size: 0.95rem;">▲ Microsservicios</h4>
                    <p style="font-size: 0.85rem; margin: 0;">
                        <strong>gRPC + Protobuf</strong><br>
                        Comunicación interna de alta velocidad<br>
                        <span style="color: #94a3b8;">Cuentas, transacciones, reportes</span>
                    </p>
                </div>

                <div
                    style="background: rgba(251, 191, 36, 0.1); padding: 12px; border-radius: 8px; border-left: 4px solid #fbbf24;">
                    <h4 style="color: #fbbf24; margin-bottom: 8px; font-size: 0.95rem;">▣ Cache y Colas</h4>
                    <p style="font-size: 0.85rem; margin: 0;">
                        <strong>MessagePack + Redis</strong><br>
                        Sesiones y transacciones pendientes<br>
                        <span style="color: #94a3b8;">Autenticación rápida, queues</span>
                    </p>
                </div>
            </div>

            <div
                style="background: rgba(248, 113, 113, 0.1); padding: 12px; border-radius: 8px; border-left: 4px solid #f87171;">
                <h4 style="color: #f87171; margin-bottom: 8px; font-size: 0.95rem;">🏛️ Integraciones Legacy
                </h4>
                <p style="font-size: 0.85rem; margin: 0;">
                    <strong>SOAP + XML</strong><br>
                    SRI (facturas), IESS (aportes), BCE (tasas), Superintendencia (reportes)<br>
                    <span style="color: #94a3b8;">⚠️ Obligatorio por regulación ecuatoriana</span>
                </p>
            </div>
        </div>

        <div style="margin-top: 1.5rem; background: rgba(233, 171, 33, 0.1); padding: 15px; border-radius: 10px;">
            <h3 style="color: var(--uide-accent); margin-bottom: 10px; text-align: center;">
                <i class="fas fa-check-circle"></i> Reglas de Oro
            </h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem;">
                <div>✅ HTTP/2 para app móvil</div>
                <div>✅ WebSockets solo para notificaciones</div>
                <div>✅ gRPC entre microsservicios</div>
                <div>✅ JSON para APIs públicas</div>
                <div>⚠️ XML/SOAP cuando sea obligatorio</div>
                <div>▣ MessagePack para cache</div>
            </div>
        </div>

        <div style="margin-top: 1rem; text-align: center; font-style: italic; color: #e2e8f0; font-size: 0.95rem;">
            <i class="fas fa-graduation-cap"></i> Cada tecnología tiene su lugar en una arquitectura moderna
        </div>
    </div>

    <!-- Slide 21: Referencias Bibliográficas -->
    <div class="slide">
        <h2><i class="fas fa-book"></i> Referencias Bibliográficas</h2>
        <div style="max-width: 1000px; margin: 0 auto;">
            <h3 style="margin-bottom: 1.5rem;">Bibliografía Básica</h3>
            <ul style="font-size: 1rem; line-height: 1.8; margin-bottom: 2rem;">
                <li><strong>Beynon-Davies, P. (2018).</strong> <em>Sistemas de Bases de Datos</em>. Editorial
                    Reverté. <a href="https://www.proquest.com/books/sistemas-de-bases-datos/docview/2590135108/se-2"
                        style="color: var(--uide-accent);" target="_blank">Enlace</a></li>
            </ul>

            <h3 style="margin-bottom: 1.5rem;">Bibliografía Complementaria</h3>
            <ul style="font-size: 0.95rem; line-height: 1.7;">
                <li><strong>Tanenbaum, A. S., & Van Steen, M. (2023).</strong> <em>Distributed Systems:
                        Principles
                        and Paradigms</em> (3rd ed.). Pearson. <a
                        href="https://alex-nguyen.github.io/vinhtngu/CSCourses/Spring2020/CS5352/Distributed_Systems_3-200225.pdf"
                        style="color: var(--uide-accent);" target="_blank">Enlace</a></li>
                <li><strong>Newman, S. (2021).</strong> <em>Building Microservices: Designing Fine-Grained
                        Systems</em> (2nd ed.). O'Reilly Media. <a
                        href="https://www.oreilly.com/library/view/building-microservices-2nd/9781492034018/"
                        style="color: var(--uide-accent);" target="_blank">Enlace</a></li>
                <li><strong>Kleppmann, M. (2023).</strong> <em>Designing Data-Intensive Applications: The Big
                        Ideas
                        Behind Reliable, Scalable, and Maintainable Systems</em> (2nd ed.). O'Reilly Media. <a
                        href="https://www.oreilly.com/library/view/designing-data-intensive-applications/9781098119058/"
                        style="color: var(--uide-accent);" target="_blank">Enlace</a></li>
            </ul>

            <h3 style="margin-bottom: 1.5rem; margin-top: 2rem;">Fuente ASU</h3>
            <ul style="font-size: 0.95rem; line-height: 1.7;">
                <li><strong>Arizona State University. (2024).</strong> <em>CSE445 (Distributed Software
                        Development)</em>. Computer Science and Engineering Program. Online</li>
                <li><strong>Arizona State University. (2024).</strong> <em>Master Class: A Practitioner's Guide
                        to
                        Generative AI</em> - April 2024</li>
            </ul>
        </div>
    </div>
    </div>

    <!-- Navigation Controls -->
    <div class="nav-controls">
        <button class="nav-btn" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
        <button class="nav-btn" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
    </div>

    <!-- Slide Counter -->
    <div class="slide-counter">
        <span id="currentSlide">1</span> / <span id="totalSlides">20</span>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- External JavaScript -->
    <script src="js/helpers.js"></script>
    <script src="js/code-tabs-prism.js"></script>
    <script src="js/http2-demos.js"></script>
    <script src="js/websocket-inline-demos.js"></script>
    <script src="js/grpc-demos.js"></script>
    <script src="js/grpc-inline-demos.js"></script>
    <script src="js/json-inline-demos.js"></script>
    <script src="js/messagepack-inline-demos.js"></script>
    <script src="js/protoc-inline-demos.js"></script>
    <script src="js/xml-inline-demos.js"></script>
    <script src="presentacion.js"></script>

    <script>
        // Script para manejar los tabs de JSON
        document.addEventListener('DOMContentLoaded', function () {
            const jsonTabs = document.querySelectorAll('.json-code-subtab');

            jsonTabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    const subtab = this.dataset.subtab;

                    // Actualizar estilos de tabs
                    jsonTabs.forEach(t => {
                        t.style.background = 'rgba(255,255,255,0.1)';
                        t.style.color = '#e2e8f0';
                    });
                    this.style.background = 'var(--uide-accent)';
                    this.style.color = '#0f1419';

                    // Mostrar contenido correspondiente
                    document.querySelectorAll('.json-code-content').forEach(content => {
                        content.style.display = 'none';
                    });

                    const targetContent = document.getElementById('jsonCode' + subtab.charAt(0).toUpperCase() + subtab.slice(1));
                    if (targetContent) {
                        targetContent.style.display = 'block';
                    }
                });
            });
        });
    </script>

</body>

</html>